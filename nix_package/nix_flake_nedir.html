
<!doctype html>
<html lang="tr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nixogreniyoruz.kavakci.dev/nix_package/nix_flake_nedir.html">
      
      
        <link rel="prev" href="nix_shell_ve_profile.html">
      
      
        <link rel="next" href="birden_cok_paketi_ayni_repo_uzerinden_yayinlamak.html">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Nix Flake Nedir? - NixOS Öğreniyoruz - Murat Çabuk</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%208a4%204%200%200%200-4%204%204%204%200%200%200%204%204%204%204%200%200%200%204-4%204%204%200%200%200-4-4%22/%3E%3C/svg%3E');}</style>


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Nix Flake Nedir? - NixOS Öğreniyoruz - Murat Çabuk" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://nixogreniyoruz.kavakci.dev/assets/images/social/nix_package/nix_flake_nedir.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://nixogreniyoruz.kavakci.dev/nix_package/nix_flake_nedir.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Nix Flake Nedir? - NixOS Öğreniyoruz - Murat Çabuk" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://nixogreniyoruz.kavakci.dev/assets/images/social/nix_package/nix_flake_nedir.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="#7EBAE4" data-md-color-accent="#7EBAE4">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nix-flake-nedir" class="md-skip">
          Ana içeriğe geç
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Başlık">
    <a href="../index.html" title="NixOS Öğreniyoruz - Murat Çabuk" class="md-header__button md-logo" aria-label="NixOS Öğreniyoruz - Murat Çabuk" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m7.352 1.592-1.364.002L5.32 2.75l1.557 2.713-3.137-.008-1.32 2.34h11.69l-1.353-2.332-3.192-.006-2.214-3.865zm6.175 0-2.687.025 5.846 10.127 1.341-2.34-1.59-2.765 2.24-3.85-.683-1.182h-1.336l-1.57 2.705-1.56-2.72zm6.887 4.195-5.846 10.125 2.696-.008 1.601-2.76 4.453.016.682-1.183-.666-1.157-3.13-.008L21.778 8.1l-1.365-2.313zM9.432 8.086l-2.696.008-1.601 2.76-4.453-.016L0 12.02l.666 1.157 3.13.008-1.575 2.71 1.365 2.315zM7.33 12.25l-.006.01-.002-.004-1.342 2.34 1.59 2.765-2.24 3.85.684 1.182H7.35l.004-.006h.001l1.567-2.698 1.558 2.72 2.688-.026-.004-.006h.01zm2.55 3.93 1.354 2.332 3.192.006 2.215 3.865 1.363-.002.668-1.156-1.557-2.713 3.137.008 1.32-2.34z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NixOS Öğreniyoruz - Murat Çabuk
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nix Flake Nedir?
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="#7EBAE4" data-md-color-accent="#7EBAE4"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="#7EBAE4" data-md-color-accent="#7EBAE4"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Ara" placeholder="Ara" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Ara">
        
        <button type="reset" class="md-search__icon md-icon" title="Temizle" aria-label="Temizle" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Arama başlatılıyor
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz" title="Depoya git" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    LinuxTurkey/nix-ogreniyoruz
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigasyon" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="NixOS Öğreniyoruz - Murat Çabuk" class="md-nav__button md-logo" aria-label="NixOS Öğreniyoruz - Murat Çabuk" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m7.352 1.592-1.364.002L5.32 2.75l1.557 2.713-3.137-.008-1.32 2.34h11.69l-1.353-2.332-3.192-.006-2.214-3.865zm6.175 0-2.687.025 5.846 10.127 1.341-2.34-1.59-2.765 2.24-3.85-.683-1.182h-1.336l-1.57 2.705-1.56-2.72zm6.887 4.195-5.846 10.125 2.696-.008 1.601-2.76 4.453.016.682-1.183-.666-1.157-3.13-.008L21.778 8.1l-1.365-2.313zM9.432 8.086l-2.696.008-1.601 2.76-4.453-.016L0 12.02l.666 1.157 3.13.008-1.575 2.71 1.365 2.315zM7.33 12.25l-.006.01-.002-.004-1.342 2.34 1.59 2.765-2.24 3.85.684 1.182H7.35l.004-.006h.001l1.567-2.698 1.558 2.72 2.688-.026-.004-.006h.01zm2.55 3.93 1.354 2.332 3.192.006 2.215 3.865 1.363-.002.668-1.156-1.557-2.713 3.137.008 1.32-2.34z"/></svg>

    </a>
    NixOS Öğreniyoruz - Murat Çabuk
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz" title="Depoya git" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    LinuxTurkey/nix-ogreniyoruz
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NixOS
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Nix Dili
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Nix Dili
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nix_lang/01_nix_dili_ve_ozellikleri.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Dili ve Özellikleri
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nix_lang/02_nix_dili_alistirmalari.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Dili ile İlgili Alıştırmalar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nix_lang/03_nix_dili_gomulu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Dilinde Gömülü Fonksiyonlar
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Nix Paket Yöneticisi
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Nix Paket Yöneticisi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_paket_yoneticisi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Paket Yöneticisi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_shell_ve_profile.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Shell ve Profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Nix Flake Nedir?
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="nix_flake_nedir.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Nix Flake Nedir?
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="İçindekiler">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      İçindekiler
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#temel-flake-komutlar" class="md-nav__link">
    <span class="md-ellipsis">
      Temel Flake Komutları
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flake-olusturma" class="md-nav__link">
    <span class="md-ellipsis">
      Flake Oluşturma
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git-uzerinden-kaynak-kodu-almak" class="md-nav__link">
    <span class="md-ellipsis">
      Git Üzerinden Kaynak Kodu Almak
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flakei-githubda-yaynlamak" class="md-nav__link">
    <span class="md-ellipsis">
      Flake'i Github'da Yayınlamak
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="birden_cok_paketi_ayni_repo_uzerinden_yayinlamak.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Birden Çok Paketi Aynı Repo Üzeriden Yayınlamak
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="override_ve_overlay.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Override ve Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="developer_ve_profile_ortamlari_olusturmak.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer ve Profile Ortamları Oluşturmak
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Sonrası
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sonrası
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nix_ile_nix_konfigurasyonu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix ile NixOS Konfigürasyonu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../module_ve_option_kullanimi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module ve Option Kullanımı
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nixos_kurulumu_ve_konfigurasyonu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NixOS Kurulumu ve Konfigürasyonu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nixos_cloud_ve_uzak_ortam.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NixOS'u Cloud ve Uzak Ortamlara Deploy Etmek
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="İçindekiler">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      İçindekiler
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#temel-flake-komutlar" class="md-nav__link">
    <span class="md-ellipsis">
      Temel Flake Komutları
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flake-olusturma" class="md-nav__link">
    <span class="md-ellipsis">
      Flake Oluşturma
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git-uzerinden-kaynak-kodu-almak" class="md-nav__link">
    <span class="md-ellipsis">
      Git Üzerinden Kaynak Kodu Almak
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flakei-githubda-yaynlamak" class="md-nav__link">
    <span class="md-ellipsis">
      Flake'i Github'da Yayınlamak
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz/edit/main/src/nix_package/nix_flake_nedir.md" title="Düzenle" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz/raw/main/src/nix_package/nix_flake_nedir.md" title="Sayfanın kaynağını görüntüle" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="nix-flake-nedir">Nix Flake Nedir?</h1>
<p><a href="https://nix.dev/concepts/flakes">Nix Flake</a>, Nix dilindeki paketleri, modülleri ve konfigürasyonları daha etkili bir şekilde yönetmek için tasarlanmıştır.</p>
<p>Flake, özellikle projeleri ve paketleri tanımlamak, paylaşmak ve bir arada tutmak için tasarlanmış bir yapı sunar. Flake'lar kullanılarak paket oluşturma, bağımlılıkları yönetme ve dağıtma işlemleri standart hale getirilmiş oluyor. Flake'leri tam karşılığı olmasa da NodeJs'deki gibi package.json dosyası veya dotnet'deki csproj dosyasına benzetebiliriz. Flake biraz daha geniş kapsamlı bir kavram bir nevi hem proje dosyamız hem de çalıştırılabilir kodlarımızın olduğu bir yapıdır.</p>
<p>Flake yapısı ile Nix eko sisteminde bir çok yeni komut ve özellikler de eklenmiş oluyor. Eski komutların neredeyse hepsi değişmiş veya yeni komutlar ile birleştirilmiş.</p>
<p>Bir paket oluşturacak önce flake.nix oluşturuyoruz ve onun arkasında geliştirdiğimiz bir çok nix dosyasını kullanarak derivation oluşturup bunu build alıyoruz. Bu sayede nix paketimiz oluşuyor. Ancak artık yeni versiyonda ileride göreceğimiz NixOS konfigürasyonunu yaparken kullandığımız konfigürasyon dosyaları bile artık flake'in bir modülü durumunda.</p>
<p>Flake dediğimiz şeyde aslında halen bir nix dosyası. Sadece belli bir formatta ve belirli bazı modülleri kullanarak oluşturulmuş bir nix dosyası. Daha fazla detay için şuan 2.8 versiyon için <a href="https://nix.dev/manual/nix/2.18/command-ref/new-cli/nix3-flake">şu resmi sayfayı</a> inceleyebilirsiniz.</p>
<h2 id="temel-flake-komutlar">Temel Flake Komutları</h2>
<ul>
<li>nix flake clone: Flake repo'sunu klonlar.</li>
<li>nix flake info: Flake metadata verileri gösterir.</li>
<li>nix flake init: Aktif dizinde flake oluşturur.</li>
<li>nix flake lock: Lock dosyası oluşturur. Bu bildiğimiz NodeJs deki package-lock.json dosyası ile aynı işi yapar.</li>
<li>nix flake new: Hazır template'leri kullanarak yeni bir flake oluşturur.</li>
<li>nix flake show: Flake output'unu gösterir.</li>
<li>nix flake update: Flake lock dosyasını günceller.</li>
<li>nix flake archive: Flake'i ve bütün input'larını Stor'a kopyalar.</li>
</ul>
<p>Flake dosyasının standart bir şeması var. Şimdilik basit Bir Flake dosyasını inceleyelim. C dilinde yazılmış basit bir uygulamayı paketleyen (yani derivation) nix kodu. Daha detaylı flake anlatımı için <a href="https://nixos.wiki/wiki/Flakes#Flake_schema">şu linki</a> ve ziyaret edebilirsiniz.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;A flake for building Hello World&quot;</span><span class="p">;</span>

  inputs<span class="o">.</span>nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:NixOS/nixpkgs/nixos-20.03&quot;</span><span class="p">;</span>

  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs <span class="p">}:</span> <span class="p">{</span>

    packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">default</span> <span class="o">=</span> <span class="k">with</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> <span class="p">};</span>
            stdenv<span class="o">.</span>mkDerivation <span class="p">{</span>
                        <span class="ss">name</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span><span class="p">;</span>
                        <span class="ss">src</span> <span class="o">=</span> self<span class="p">;</span>
                        <span class="ss">buildPhase</span> <span class="o">=</span> <span class="s2">&quot;gcc -o hello ./hello.c&quot;</span><span class="p">;</span>
                        <span class="ss">installPhase</span> <span class="o">=</span> <span class="s2">&quot;mkdir -p $out/bin; install -t $out/bin hello&quot;</span><span class="p">;</span>
                    <span class="p">};</span>

              <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Bu Flake kodu, "Hello World" adlı basit bir C programını derleyip kurmak için bir Nix Flake'ini temsil eder. Kodu adım adım inceleyelim:</p>
<ol>
<li>
<p><strong>description:</strong> Flake'in kısa bir açıklaması. Bu durumda, "Hello World" programını derlemek için bir Flake oluşturduğunu belirtir.</p>
</li>
<li>
<p><strong>inputs.nixpkgs.url:</strong> Bu, Flake'in bağımlılıklarından biri olan <code>nixpkgs</code>'in kaynak konumunu belirtir. Bu örnekte, <code>nixos-20.03</code> branch'ini GitHub üzerinden alır.</p>
</li>
<li>
<p><strong>outputs:</strong> fonksiyonu, self ve nixpkgs'i parametre olarak alır. Yani, self ve nixpkgs fonksiyona giriş parametreleridir ve fonksiyonun içinde bu parametreler kullanılarak çıktılar üretilir.</p>
</li>
<li>
<p><strong>packages.x86_64-linux.default:</strong> Bu, çıktının bir parçası olan bir paketin tanımlandığı bölümdür. Bu paket, <code>x86_64-linux</code> sistem için derlenmiş bir <code>hello</code> adlı basit bir programdır.</p>
</li>
<li>
<p><strong>with import nixpkgs { system = "x86_64-linux"; }:</strong> <code>nixpkgs</code>'i belirli bir sistemle (burada x86_64-linux) içe aktarır ve onu kullanılabilir hale getirir.</p>
</li>
<li>
<p><strong>stdenv.mkDerivation {...}:</strong> Bir türetilmiş (derivation) ifadesini başlatır ve gerekli özellikleri belirtir. Diğe bir versiyonu daha basit hali <strong>builtins.derivation</strong> fonksiyonudur. ise Standart Environment'ın kısaltmasıdır. Paket için gerekli olan environment'i ifade eder. Biz bu örnek flake'de buildPhase ve installPhase kullandık ancak daa bir çok safha var tabii ki. Hem standard environment hem de diğer safhalar için <a href="https://nixos.org/manual/nixpkgs/stable/">NisOs manual</a> sayfasındaki <a href="https://nixos.org/manual/nixpkgs/stable/#part-stdenv">Standard Environment</a> ve <a href="https://nixos.org/manual/nixpkgs/stable/#sec-stdenv-phases">Phases</a> sayfalarını kesinlikle incelemenizi öneririm.</p>
<ul>
<li><strong>name:</strong> derivation adı, bu durumda "hello".</li>
<li>
<p><strong>src:</strong> Kaynak dosyaların bulunduğu dizin. Bu örnekte <code>self</code> ifadesi, bu flake'in bulunduğu dizini ifade eder.</p>
</li>
<li>
<p><strong>buildPhase:</strong> Derleme aşamasını tanımlar. Bu durumda, <code>gcc</code> kullanılarak <code>hello.c</code> dosyasının derlenmesini sağlar.</p>
</li>
<li>
<p><strong>installPhase:</strong> Kurulum aşamasını tanımlar. Derlenen <code>hello</code> programını çıktı dizinine kopyalar.</p>
</li>
</ul>
</li>
</ol>
<p>Bu Flake, <code>nix flake build</code> komutu kullanılarak derlenebilir. Derleme sonucunda hello adında bir uygulama (paket) oluşur.</p>
<p>Flake şeması detayları hakkında <a href="https://nixos.wiki/wiki/Flakes#Basic_project_usage">Şu sayfayı</a> da ziyaret edeblirsiniz.</p>
<p>Tabi flake dediğimiz kurgu bu kadar yalın olmuyor. Ayrıca içine yüzlerce bağımlılık alan hatta onlarca lokal nix modülü import eden flake'ler yazılıyor.</p>
<p>Bir flake output olarak alttakileri üretebilir.</p>
<ul>
<li>Nix Paketleri</li>
<li>Nix Geliştirme Ortamları</li>
<li>NixOS Modülleri (Nix Configuration)</li>
<li>Nix Template'leri (hazır flake dosyaları)</li>
</ul>
<p>Hepsini de vakti geldiğinde göreceğiz. Şimdilik sadece paket oluşturmayı ve Flake yapısını öğrenmeye çalışalım.</p>
<h2 id="flake-olusturma">Flake Oluşturma</h2>
<p>Basitden karmaşığa doğru gidelim. Önce basit bir flake oluşturalım.</p>
<p>Bir klasör oluşturup içine flake.nix dosyası oluşturalım. Kendim flake-first adında bir klasör oluşturup onun içine flake.nix dosyası oluşturdum.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self <span class="p">}:</span> <span class="p">{</span>
    <span class="ss">mesaj</span> <span class="o">=</span> <span class="s2">&quot;Merhaba Dünya!&quot;</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Yazılabilecek en küçük flake dosyası bu olabilir. Burada self kelimesi doğrudan flake'in kedisini ifade eder. Laziness için bu gereklidir. Self kelimesi sayesinde hem nested (iç içe) flake'ler oluşturulabilir Ayrıca flake içinde kendi çıktılarına (output) ve attribute'larına (özellik) erişim sağlanabilir.</p>
<p>Şimdi kodumuzu bir test edelim. Bunun için alttaki komutu kullanabiliriz. Eval komutu aslında nix expression'ları değerlendirmek için kullanılır. Dolayısıyla bizim kodumuz da bir nix expression.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span><span class="nb">eval</span><span class="w"> </span>.#mesaj

<span class="c1"># sonuç</span>
<span class="c1">#&quot;merhaba dünya&quot;</span>
</code></pre></div>
<p>Yavaş yavaş kosumuzu geliştirelim.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nixos/nixpkgs&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs <span class="p">}:</span> <span class="p">{</span>
    <span class="ss">mesaj</span> <span class="o">=</span> <span class="s2">&quot;Merhaba Dünya!&quot;</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>ÖZel birşey yapmadığımız için kodu çalıştırdığımızda bir değişiklik olmayacaktır.</p>
<p>Şimdi basit bir uygulamayı build alıp çalıştırmayı deneyelim.</p>
<p>Örneklerde en çok kullanılan hello world uygulamasını kullanacağız.</p>
<p>Bir klasör oluşturup (ben merhaba adında oluşturdum). Daha sonra klasöre merhaba.c adında bir dosya oluşturalım ve içine alttaki kodları kopyalayalım.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Merhaba Dünya!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Aynı dizine flake.nix dosyası oluşturup içine alttaki kodları kopyalayalım.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Merhaba Dünya! için flake&quot;</span><span class="p">;</span>

  <span class="c1"># input olarak nixpkgs&#39;i alıyoruz.</span>
  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nixos/nixpkgs&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1"># output olarak self ve nixpkgs&#39;i alıyoruz.</span>
  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs <span class="p">}:</span> <span class="p">{</span>

    <span class="c1"># bu standart olarak kullanılmalı. flake şemasının zorunlu tuttuğu bir attribute</span>
    packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">default</span> <span class="o">=</span> <span class="k">with</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> <span class="p">};</span>

    stdenv<span class="o">.</span>mkDerivation <span class="p">{</span>
                         <span class="ss">name</span> <span class="o">=</span> <span class="s2">&quot;merhaba&quot;</span><span class="p">;</span>
                         <span class="ss">src</span> <span class="o">=</span> self<span class="p">;</span>
                         <span class="ss">buildPhase</span> <span class="o">=</span> <span class="s2">&quot;gcc -o merhaba ./merhaba.c&quot;</span><span class="p">;</span>
                         <span class="ss">installPhase</span> <span class="o">=</span> <span class="s2">&quot;mkdir -p $out/bin; install -t $out/bin merhaba&quot;</span><span class="p">;</span>

    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Kodumuzu çalıştırmadan önce neler döndüğüne bakalım.</p>
<ul>
<li><strong>nixpkgs.stdenv.mkDerivation</strong>: Bu, bir türetilmiş (derivation) ifadesini başlatır ve gerekli özellikleri belirtir. Bu fonksiyonun içindeki özellikler şu şekilde:</li>
<li><strong>name</strong>: derivation adı, bu durumda "merhaba".</li>
<li><strong>src</strong>: Kaynak dosyaların bulunduğu dizin. Bu örnekte self ifadesi, bu flake'in bulunduğu dizini ifade eder.</li>
<li><strong>buildPhase</strong>: Derleme aşamasını tanımlar. Bu durumda, gcc kullanılarak merhaba.c dosyasının derlenmesini sağlar.</li>
<li><strong>installPhase</strong>: Kurulum aşamasını tanımlar. Derlenen merhaba programını çıktı dizinine kopyalar.</li>
<li><strong>builder</strong>: Burada yok ancak istersek builder için bir executable tanımlayabiliriz. Mesela bash'i kullanıp ona bir script'i (args) parametre olarak geçirebiliriz.</li>
<li><strong>args</strong>: builder için gerekli olan diğer parametreler mesela bir script dosyası. Eğer Docker hakkında bilginiz varsa bunu entrypoint.sh gibi düşünebilirsiniz. Daha fazla detay için <a href="https://nixos.org/guides/nix-pills/generic-builders">şu sayfayı</a> ziyaret edebilirsiniz. Ayrıca nixpkgs altında bulunan builder'ları da şu <a href="https://github.com/NixOS/nixpkgs/tree/master/pkgs/stdenv/generic">resmi Github sayfasında</a> görebilirsiniz.
  <div class="highlight"><pre><span></span><code>  <span class="ss">builder</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span>pkgs<span class="o">.</span>bash<span class="si">}</span><span class="s2">/bin/bash&quot;</span><span class="p">;</span>
  <span class="ss">args</span> <span class="o">=</span> <span class="p">[</span> <span class="l">./hello_builder.sh</span> <span class="p">];</span>
</code></pre></div></li>
<li><strong>packages.x86_64-linux.default</strong>: Bu zorunlu bir attribute. x86_64-linux kısmı build aldığımız sisteme göre değişiklik gösterir yani hedef sistemimize göre buraya uygun sistem adını yazmalıyız. Örneğin aarch64-apple-darwin14, aarch64-pc-linux-gnu, x86_64-w64-mingw32, aarch64-apple-ios.</li>
</ul>
<p>Artık bir uygulamamız var. Build almadan çalıştıramayız haliyle. Amacımız uygulamamızı flake üzerinden sadece build almak. Bunun için <code>nix build</code> komutunu çalıştırıyoruz. Komut çalıştıktan sonra klasöre gidip baktığımızda alttaki gibi merhaba adında bir klasör ve bir de flake.lock adında bir dosya göreceğiz.</p>
<p><img alt="merhaba flake" src="../assets/files/merhaba-flake.png" /></p>
<p>Result klasöründe uygulamamızın binary'sini görebilirsiniz. Uygulamamızı doğrudan bu dizinden çağırabiliriz.</p>
<div class="highlight"><pre><span></span><code>./result/bin/merhaba
<span class="c1"># Merhaba Dünya!</span>
</code></pre></div>
<p>Yada daha önce gördüğümüz <code>nix shell</code> komutu ile de çağırabiliriz.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>shell<span class="w"> </span>--command<span class="w"> </span>merhaba
<span class="c1"># Merhaba Dünya!</span>
</code></pre></div>
<p>Lock dosyası ise Nix ve Nix Flake bağlamında, kilit dosya (lock file), bir derleme sırasında kullanılan bağımlılıkların tam sürümlerini kaydetmek için kullanılan bir mekanizmadır. nix build komutunu çalıştırdığınızda, Nix, derlemenin her seferinde belirli bağımlılıkların kullanıldığından emin olmalıdır. Kilit dosyası, bu sürümleri belirli bir işleme sabitleyerek bu amaca hizmet eder. Tabi bizim paketimizde henuz ciddi bir bağımlılık yok ancak örnek flake dosyalarını incelerseniz bağımlılık versiyonlarının ne kadar önemli olduğunu anlayabilirsiniz. Zaten eğer bir yazılım geliştiriciyseniz bunu çom defa deneyimlemişsinizdir.</p>
<p>Lock dosyası sayesinde sistem çıktıları cache'leyebilir. Girdilerde mesela bir değişiklik yoksa sistem bazı adımları cache'den çalıştırabilir. Diyelim ki flake.ini dosyasında bazı değişiklikler yaptık. Eğer sistem build alırken bu değişiklikleri görmezse <code>nix flake update</code> komutunu çalıştırmayı unutmayın. Zaten update yapıp tekrar build alırsanız sürenin tekrar uzadığını görebilirsiniz.</p>
<p>İleride işimize yarayacak bazı flake komutlarına bakalım. Flake yazmaya devam edeceğiz bu arada, daha karmaşık flake'ler yazacağız.</p>
<p>Az önce yazdığımız flake dizininde alttaki komutları çalıştıralım.</p>
<p><strong><code>nix flake show</code></strong></p>
<p>Build alınan uygulamanın paket bilgilerini gösterir.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>show

<span class="c1"># alttaki gibi bir sonuç görmeniz lazım</span>

path:.../flake-merhaba?lastModified<span class="o">=</span><span class="m">1705065665</span><span class="p">&amp;</span><span class="nv">narHash</span><span class="o">=</span>sha256-uvTQB%2ByMrr/2qA0OseVV/8FYeGIA31RUTG9%2Bhql7WmU%3D
└───packages
└───x86_64-linux
└───default:<span class="w"> </span>package<span class="w"> </span><span class="s1">&#39;merhaba&#39;</span>
</code></pre></div>
<p>Bu ekrana bakarak mesela alttaki komutları çalıştırabiliriz.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>run<span class="w"> </span>.#default
<span class="c1"># Merhaba Dünya!</span>

<span class="c1"># shell ile kurulum yapıyoruz</span>
nix<span class="w"> </span>shell<span class="w"> </span>.#default
<span class="c1"># merhaba uygulamasını çalıştırıyoruz</span>
merhaba
<span class="c1"># Merhaba Dünya!</span>
</code></pre></div>
<p><strong><code>nix flake metadata</code></strong></p>
<p>Flake dosyasındaki metadata verileri ve lock dosyasındaki metadata verilerini gösterir.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>metadata

Resolved<span class="w"> </span>URL:<span class="w">  </span>path:...flake-merhaba
Locked<span class="w"> </span>URL:<span class="w">    </span>path:.../flake-merhaba?lastModified<span class="o">=</span><span class="m">1705065665</span><span class="p">&amp;</span><span class="nv">narHash</span><span class="o">=</span>sha256-uvTQB%2ByMrr/2qA0OseVV/8FYeGIA31RUTG9%2Bhql7WmU%3D
Description:<span class="w">   </span>Merhaba<span class="w"> </span>Dünya!<span class="w"> </span>için<span class="w"> </span>flake
Path:<span class="w">          </span>/nix/store/m2wlbd9g2yzagxv4zhv7rx8n4n3wwlvg-source
Last<span class="w"> </span>modified:<span class="w"> </span><span class="m">2024</span>-01-12<span class="w"> </span><span class="m">16</span>:21:05
Inputs:
└───nixpkgs:<span class="w"> </span>github:nixos/nixpkgs/c6b7be9ad761d5e74bf3132971e155d41c91925d
</code></pre></div>
<p>Şimdi başka bir hazır flake'i kendi flake'imizde kullanalım. Başka bir klasörde deneyelim. Ben merhaba-hello adında bir klasöre alttaki kodu bir flake.nix dosyasına kopyaladım. Ancak önceki örneğimizden <code>merhaba.c</code> dosyamızı da alıp bu klasöre koymalıyız.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Merhaba Dünya! için flake&quot;</span><span class="p">;</span>

  <span class="c1"># input olarak nixpkgs&#39;i alıyoruz.</span>
  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nixos/nixpkgs&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1"># output olarak self ve nixpkgs&#39;i alıyoruz.</span>
  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs <span class="p">}:</span> <span class="p">{</span>

    <span class="c1"># bu standart olarak kullanılmalı. flake şemasının zorunlu tuttuğu bir attribute</span>
    packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">default</span> <span class="o">=</span> <span class="k">with</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> <span class="p">};</span>

    stdenv<span class="o">.</span>mkDerivation <span class="p">{</span>
                         <span class="ss">name</span> <span class="o">=</span> <span class="s2">&quot;merhaba&quot;</span><span class="p">;</span>
                         <span class="ss">src</span> <span class="o">=</span> self<span class="p">;</span>
                         <span class="ss">buildPhase</span> <span class="o">=</span> <span class="s2">&quot;gcc -o merhaba ./merhaba.c&quot;</span><span class="p">;</span>
                         <span class="ss">installPhase</span> <span class="o">=</span> <span class="s2">&quot;mkdir -p $out/bin; install -t $out/bin merhaba&quot;</span><span class="p">;</span>

    <span class="p">};</span>

    packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">hello</span> <span class="o">=</span> nixpkgs<span class="o">.</span>legacyPackages<span class="o">.</span>x86_64-linux<span class="o">.</span>hello<span class="p">;</span>


<span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Şimdi build alıp bir çıktılarına bakalım</p>
<div class="highlight"><pre><span></span><code>nix build

nix flake show

<span class="l">path:.../flake-merhaba?lastModified=1705068716&amp;narHash=sha256-HztHa%2BdkFp2jYbItkr9llJy7bBSsKYj1EqkvsndIji8%3D</span>
<span class="err">└───</span>packages
<span class="err">└───</span>x86_64-linux
<span class="err">├───</span>default<span class="p">:</span> package <span class="err">&#39;</span>merhaba&#39;
<span class="err">└───</span>hello<span class="p">:</span> package <span class="err">&#39;</span>hello-2<span class="mf">.12.1</span><span class="err">&#39;</span>
</code></pre></div>
<p>O zaman hello paketini çağırabiliriz.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>run<span class="w"> </span>.#hello

<span class="c1"># Hello, world!</span>
</code></pre></div>
<p>Peki o zaman şunu soralım kendimize. Eğer <code>nix flake show</code> komutu bir flake'in bilgilerini gösteriyorsa biz nixpkgs'yi de bu şekilde inceleyebilir miyiz? Sonuçta şunu demiştik nixpkgs'de aslında bir flake.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>show<span class="w"> </span>github:NixOS/nixpkgs

github:NixOS/nixpkgs/391d29cb04fe2ca9a4744c10d6b8a7783f6b0f6d
├───checks
│<span class="w">   </span>└───x86_64-linux
│<span class="w">       </span>├───nixosSystemAcceptsLib:<span class="w"> </span>derivation<span class="w"> </span><span class="s1">&#39;nixos-system-nixos-24.05.20240112.391d29c&#39;</span>
│<span class="w">       </span>└───tarball:<span class="w"> </span>derivation<span class="w"> </span><span class="s1">&#39;nixpkgs-tarball-24.05pre20240112.391d29c&#39;</span>
├───htmlDocs:<span class="w"> </span>unknown
├───legacyPackages
│<span class="w">   </span>├───aarch64-darwin<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───aarch64-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───armv5tel-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───armv6l-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───armv7l-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───i686-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───mipsel-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───powerpc64le-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───riscv64-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>├───x86_64-darwin<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
│<span class="w">   </span>└───x86_64-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--legacy&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
├───lib:<span class="w"> </span>unknown
└───nixosModules
├───notDetected:<span class="w"> </span>NixOS<span class="w"> </span>module
└───readOnlyPkgs:<span class="w"> </span>NixOS<span class="w"> </span>module
</code></pre></div>
<p>Sonuçlara baktığımızda legacyPackage'lar için komuta --legacy etiketini eklememiz gerektiğini görüyoruz. Sonuçta benim amacım hello paketini listede görmek.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>show<span class="w"> </span>github:NixOS/nixpkgs<span class="w"> </span>--legacy
</code></pre></div>
<p>Komutu bu şekilde çalıştırdığımızda listenin ekrana sığmasına imkan yok. O yüzden filtreleme yapalım. Bunu için Nix json formatında liste veriyor. Jq kullanarak filtreleme yapabiliriz.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>show<span class="w"> </span>--json<span class="w"> </span>github:NixOS/nixpkgs<span class="w"> </span>--legacy<span class="p">|</span>jq<span class="w"> </span><span class="s1">&#39;.legacyPackages.&quot;x86_64-linux&quot; | with_entries(select(.key | contains(&quot;hello&quot;)))&#39;</span>

<span class="c1"># SONUÇ</span>

warning:<span class="w"> </span>legacyPackages.aarch64-darwin<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.aarch64-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.armv5tel-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.armv6l-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.armv7l-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.i686-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.mipsel-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.powerpc64le-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.riscv64-linux<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
warning:<span class="w"> </span>legacyPackages.x86_64-darwin<span class="w"> </span>omitted<span class="w"> </span><span class="o">(</span>use<span class="w"> </span><span class="s1">&#39;--all-systems&#39;</span><span class="w"> </span>to<span class="w"> </span>show<span class="o">)</span>
<span class="o">{</span>
<span class="s2">&quot;hello&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;A program that produces a familiar, friendly greeting&quot;</span>,
<span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;hello-2.12.1&quot;</span>,
<span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;derivation&quot;</span>
<span class="o">}</span>,
<span class="s2">&quot;hello-unfree&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;An example package with unfree license (for testing)&quot;</span>,
<span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;example-unfree-package-1.0&quot;</span>,
<span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;derivation&quot;</span>
<span class="o">}</span>,
<span class="s2">&quot;hello-wayland&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="s2">&quot;description&quot;</span>:<span class="w"> </span><span class="s2">&quot;Hello world Wayland client&quot;</span>,
<span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;hello-wayland-unstable-2023-10-26&quot;</span>,
<span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;derivation&quot;</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>Listede ilk sıradaki paket bizim yukarıda çağırıp kullandığımız hello paketi. Versiyonunu da 2.12.1 olarak görüyoruz.</p>
<p>Birde nixpkgs'nin metadata'sına bakalım.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>metadata<span class="w">  </span>github:NixOS/nixpkgs

Resolved<span class="w"> </span>URL:<span class="w">  </span>github:NixOS/nixpkgs
Locked<span class="w"> </span>URL:<span class="w">    </span>github:NixOS/nixpkgs/e52366c4d82286ccb62bd6812e370141466d53c0
Description:<span class="w">   </span>A<span class="w"> </span>collection<span class="w"> </span>of<span class="w"> </span>packages<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>Nix<span class="w"> </span>package<span class="w"> </span>manager
Path:<span class="w">          </span>/nix/store/jqypdy1dcvlz7i9qlgd7g5wvmjknzs6f-source
Revision:<span class="w">      </span>e52366c4d82286ccb62bd6812e370141466d53c0
Last<span class="w"> </span>modified:<span class="w"> </span><span class="m">2024</span>-01-14<span class="w"> </span><span class="m">16</span>:17:14
</code></pre></div>
<p>Lokal makinemde nixpkgs <code>/nix/store/jqypdy1dcvlz7i9qlgd7g5wvmjknzs6f-source</code> dizininde görünüyor. Bu dizine gittiğimizde nixpkgs'nin bütün kodlarını görebiliriz.</p>
<p><img alt="nixpkgs.png" src="../assets/files/nixpkgs.png" /></p>
<p>Yani aslında nixpkgs de bizim yazdığımız flake'ler gibi bir flake. Tek farkı bütün paketleri içinde barındırıyor olması. Dolayısıyla neredeyse her gün commit alıyor. Mesele NixOS kullanıyor olsaydık onunla ilgili repoları'da yine buradan kullanacaktık.</p>
<p><img alt="nixos-pkgs.png" src="./assets/files/nixos-pkgs.png" /></p>
<p>Biz aslında nixpkgs kullandığımızda sistem onu GitHub'dan indirip kullanıyor. Dolayısıyla yukarıda hello paketini aradığımız kodu şu şekilde de çalıştırabiliriz. Sonuç aynı olacaktır.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>flake<span class="w"> </span>show<span class="w"> </span>--json<span class="w"> </span>/nix/store/jqypdy1dcvlz7i9qlgd7g5wvmjknzs6f-source<span class="w"> </span>--legacy<span class="p">|</span>jq<span class="w"> </span><span class="s1">&#39;.legacyPackages.&quot;x86_64-linux&quot; | with_entries(select(.key | contains(&quot;hello&quot;)))&#39;</span>
</code></pre></div>
<p>Kod standartları için resmi repo'sunda yer alan contribution sayfasındaki <a href="https://github.com/NixOS/nixpkgs/blob/master/CONTRIBUTING.md#code-conventions">Code Convention</a> sayfası örnek olabilir.</p>
<h2 id="git-uzerinden-kaynak-kodu-almak">Git Üzerinden Kaynak Kodu Almak</h2>
<p>Şimdiki örneğimizde C ile yazmış oluğumuz kodu GitHıb üzerinden alıp build alacağız. Kendim message adında bir klasöre flake.nix dosyamı oluşturup alttaki kodları kopyaladım. Github'a nasıl kod konulur ve nasıl tag atılır vb konulara burada girmemiz çok mümkün değil. Zaten konuyla akalı bir çok kaynak bulabilirsiniz. Kendim ufak bir uygulama koydum kendi Github hesabıma size onu kullanabilirsiniz ilk testlerinizde.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># flake.nix</span>

<span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Simple Message App with C&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="l">github:NixOS/nixpkgs/nixos-unstable</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span><span class="p">{</span> self<span class="p">,</span> nixpkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>

    <span class="k">let</span>

      <span class="ss">simpleMessageAppSrc</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/muratcabuk/simple-message-app-with-c/archive/refs/tags/v1.0.tar.gz&quot;</span><span class="p">;</span>

      <span class="c1"># Simple Message App&#39;in kaynak dizini</span>
      <span class="ss">src</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>fetchTarball <span class="p">{</span>
        <span class="ss">url</span> <span class="o">=</span> simpleMessageAppSrc<span class="p">;</span>
        <span class="ss">sha256</span> <span class="o">=</span> <span class="s2">&quot;sha256:1aai9xdkgq2vd0ch10gxhg53qfv4ny2x3jgxlq4r9nrn4g9r8s1z&quot;</span><span class="p">;</span>
      <span class="p">};</span>

       <span class="c1"># Programı derleme komutu</span>
      <span class="ss">buildCommand</span> <span class="o">=</span> <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">                        gcc -o simple-message-app </span><span class="si">${</span>src<span class="si">}</span><span class="s s-Multiline">/message.c</span>
<span class="s s-Multiline">                     &#39;&#39;</span><span class="p">;</span>

    <span class="k">in</span>
    <span class="p">{</span>

      packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">default</span> <span class="o">=</span> <span class="k">with</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> <span class="p">};</span>

      stdenv<span class="o">.</span>mkDerivation <span class="p">{</span>
        <span class="ss">name</span> <span class="o">=</span> <span class="s2">&quot;simple-message-app&quot;</span><span class="p">;</span>
        <span class="ss">version</span> <span class="o">=</span> <span class="s2">&quot;v1.0&quot;</span><span class="p">;</span>
        <span class="ss">src</span> <span class="o">=</span> src<span class="p">;</span>
        <span class="ss">buildInputs</span> <span class="o">=</span> <span class="p">[</span> gcc <span class="p">];</span>
        <span class="ss">nativeBuildInputs</span> <span class="o">=</span> <span class="p">[</span> autoconf libtool makeWrapper <span class="p">];</span>
        <span class="ss">buildPhase</span> <span class="o">=</span> buildCommand<span class="p">;</span>
        <span class="ss">installPhase</span> <span class="o">=</span> <span class="s2">&quot;mkdir -p $out/bin; install -t $out/bin simple-message-app&quot;</span><span class="p">;</span>

        <span class="ss">meta</span> <span class="o">=</span> <span class="k">with</span> nixpkgs<span class="o">.</span>lib<span class="p">;</span> <span class="p">{</span>
          <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Simple Message App with C&quot;</span><span class="p">;</span>
          <span class="ss">license</span> <span class="o">=</span> licenses<span class="o">.</span>mit<span class="p">;</span>
          <span class="ss">version</span> <span class="o">=</span> <span class="s2">&quot;v1.0&quot;</span><span class="p">;</span>
        <span class="p">};</span>
      <span class="p">};</span>




    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Kodda GitHub'dan release edilmiş kodları aldığımız için fetchTarball kullandık ama diğerleri de hatta alttakilerden daha fazlası da mevcut.</p>
<ul>
<li><strong>builtins.fetchGit</strong>: Git repo'larından dosya indirmek için kullanılır. Mesela her zaman en sürümü almak için kullanılabilir.</li>
<li><strong>builtins.fetchClosure</strong>: Nix store'da bulunan bir dosyayı indirmek için kullanılır.</li>
<li><strong>builtins.fetchTarball</strong>: Tarball dosyalarını indirmek için kullanılır.</li>
<li><strong>builtins.fetchurl</strong>: URL'den dosya indirmek için kullanılır.</li>
</ul>
<p>Builtins fonksiyonları dışında da nixpkgs altında daha bir çok fonksiyon bulunmaktadır. <a href="https://nixos.org/manual/nixpkgs/stable/#chap-pkgs-fetchers">Şu sayfadan</a> bakabilirsiniz.</p>
<ul>
<li>fetchDebianPatch</li>
<li>fetchsvn</li>
<li>fetchgit</li>
<li>fetchcvs</li>
<li>fetchFromGitea</li>
<li>fetchFromGitHub</li>
<li>fetchFromGitLab</li>
<li>fetchFromGitiles</li>
<li>fetchFromBitbucket</li>
<li>fetchFromSavannah</li>
<li>fetchFromRepoOrCz</li>
<li>fetchFromSourcehut</li>
<li>requireFile</li>
<li>fetchtorrent</li>
</ul>
<p>Şimdi kodumuzu built alıp test edelim.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>build<span class="w"> </span>--impure
nix<span class="w"> </span>run<span class="w"> </span>.#default
<span class="c1"># sonuşta size bir kelime sorup onu ekrana yazacak</span>
</code></pre></div>
<p>Ancak bu haliyle kodumuz genişleyebilir ve kullanışlı değil. Ayrıca tabi burada çok karmaşık işler yapmıyoruz ancak hakikaten ciddi bir uygulamayı paket yapıyor olsak belki onlarca bağımlılık ve build ve deploy işlemleri için yüzlerce satır yazmamız gerekebilirdi. Bundan dolayı daha moduler yazmak işimizi kolaylaştıracaktır.</p>
<p>Mesela derivative oluşturma kısmını biraz daha parametrik yazsak her versiyonda kullanabilir. Şu haliyle kodumuz sadece tek bir versiyon için kullanılabilir görünüyor. Eğer paketimizi her zaman en son versiyonu build alacak şekilde yazsaydık o zaman bu kod işimizi görebilirdi. Tabi o zaman release edilmiş bir tar dosyasını değilde doğrudan örneğim master branch'in en son commit'ini kullanabilirdik.</p>
<p>Şimdi Bunun için yeni bir klasör (message-second) açıyorum ve öncelikle derivative kısmını ayırmak için alttaki kodları <code>derivation.nix</code> adında bir dosya oluşturup kopyalıyorum.</p>
<p>Daha önceki derslerden hatırlayabileceğimiz üzere bu bir fonksiyon tanımı. Bu sayede daha karmaşık süreçleri yönetmemiz kolaylaşacak.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># derivation.nix</span>
<span class="p">{</span>pkgs<span class="p">,</span> stdenv<span class="p">,</span> gcc<span class="p">,</span> selectedVersion<span class="p">,</span> <span class="o">...</span><span class="p">}:</span>


    <span class="k">let</span>

<span class="ss">simpleMessageAppSrc</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/muratcabuk/simple-message-app-with-c/archive/refs/tags/</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">.tar.gz&quot;</span><span class="p">;</span>

      <span class="ss">shaSet</span> <span class="o">=</span> <span class="p">{</span><span class="ss">v10</span><span class="o">=</span><span class="s2">&quot;sha256:1aai9xdkgq2vd0ch10gxhg53qfv4ny2x3jgxlq4r9nrn4g9r8s1z&quot;</span><span class="p">;</span>
                <span class="ss">v20</span><span class="o">=</span><span class="s2">&quot;sha256:11p3c793yjpm4z4j9shlidbii7wd0kf9qflx8jqhhnwwhqf93mam&quot;</span><span class="p">;</span>
                <span class="ss">v30</span><span class="o">=</span><span class="s2">&quot;sha256:1a4a2i32da9shc2d3i1ndarmla97bald7lgs1vjmwyjlry0mk4m7&quot;</span><span class="p">;};</span>

      <span class="ss">shaVer</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>concatStringsSep <span class="s2">&quot;&quot;</span> <span class="p">(</span>pkgs<span class="o">.</span>lib<span class="o">.</span>strings<span class="o">.</span>splitString <span class="s2">&quot;.&quot;</span> <span class="s2">&quot;</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">&quot;</span><span class="p">);</span>


      <span class="ss">versionSha</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>getAttr shaVer shaSet<span class="p">;</span>

      <span class="c1"># Simple Message App&#39;in kaynak dizini</span>
      <span class="ss">src</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>fetchTarball <span class="p">{</span>
        <span class="ss">url</span> <span class="o">=</span> simpleMessageAppSrc<span class="p">;</span>
        <span class="ss">sha256</span> <span class="o">=</span> versionSha<span class="p">;</span>
      <span class="p">};</span>

    <span class="k">in</span>
        stdenv<span class="o">.</span>mkDerivation <span class="p">(</span>finalAttrs<span class="p">:</span> <span class="p">{</span>
              <span class="ss">name</span> <span class="o">=</span> <span class="s2">&quot;simple-message-app&quot;</span><span class="p">;</span>
              <span class="ss">version</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>

              <span class="ss">src</span> <span class="o">=</span> src<span class="p">;</span>

              <span class="ss">buildInputs</span> <span class="o">=</span> <span class="p">[</span> gcc <span class="p">];</span>
              <span class="ss">buildPhase</span> <span class="o">=</span> <span class="s2">&quot;gcc -o simple-message-app </span><span class="si">${</span>src<span class="si">}</span><span class="s2">/message.c&quot;</span><span class="p">;</span>
              <span class="ss">installPhase</span> <span class="o">=</span> <span class="s2">&quot;mkdir -p $out/bin; install -t $out/bin simple-message-app&quot;</span><span class="p">;</span>

              <span class="ss">meta</span> <span class="o">=</span> <span class="k">with</span> pkgs<span class="o">.</span>lib<span class="p">;</span> <span class="p">{</span>
                    <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Simple Message App with C&quot;</span><span class="p">;</span>
                    <span class="ss">license</span> <span class="o">=</span> licenses<span class="o">.</span>mit<span class="p">;</span>
                    <span class="ss">version</span> <span class="o">=</span>  <span class="s2">&quot;</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
                <span class="p">};</span>
        <span class="p">})</span>
</code></pre></div>
<p>Kod aslında çok karmaşık değil. Verilen versiyon numarasına göre tar dosyası için gerekli hash üretiliyor ve kod indirilip build aşamasına kaynak kodu src parametresi ile taşınıyor.</p>
<p>Bir tane de <code>flake.nix</code> adında br dosya oluşturup alttaki kodları da ona kopyaladım.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># flake.nix</span>
<span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Simple Message App with C&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nixos/nixpkgs/nixos-unstable&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span><span class="p">{</span> self<span class="p">,</span> nixpkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>
    <span class="k">let</span>

      <span class="nb">derivation</span> <span class="o">=</span> <span class="nb">import</span> <span class="l">./derivation.nix</span><span class="p">;</span>
      <span class="ss">selectedVersion</span> <span class="o">=</span> <span class="p">{</span><span class="ss">version</span> <span class="o">=</span> <span class="s2">&quot;v1.0&quot;</span><span class="p">;};</span>

    <span class="k">in</span>
    <span class="p">{</span>
      packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">default</span> <span class="o">=</span> <span class="k">with</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> config<span class="o">.</span><span class="ss">allowUnfree</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span> <span class="p">};</span>

      <span class="nb">derivation</span> <span class="p">{</span><span class="ss">pkgs</span> <span class="o">=</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> config<span class="o">.</span><span class="ss">allowUnfree</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span> <span class="p">};</span>
                  <span class="ss">stdenv</span> <span class="o">=</span> stdenv<span class="p">;</span> <span class="ss">gcc</span> <span class="o">=</span> gcc<span class="p">;</span>
                  <span class="ss">selectedVersion</span> <span class="o">=</span> selectedVersion<span class="p">;</span>
                  <span class="p">};</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>'Derivation.nix' dosyamız bir module olarak içeri import ediliyor ve in bloğu içinde derivation fonksiyonu olarak çağrılıyor. Bu versiyonun güzel tarafı bir kere derivation fonksiyonun karmaşası başka bir modüle bırakılmış olması ve bu fonksiyonun çalışabilmesi için gerekli parametrelerin hazırlanma işinin de flake içinde halledilmiş olması. Böylece istediğimiz versiyon numarasını parametre olarak fonksiyona geçip paketimizi oluşturabiliyoruz.</p>
<p>Ancak bu haliyle de kodumuz çok kullanışlı değil. Örneğin derivative sürecini yöneten fonksiyonumuz neden ilgili versiyonun kaynak kodunu indirme sürecini de yönetiyor? yani kaynak kod derivation için bir girdi aslında. Her yeni versiyon için bu kodu değiştirmek zorunda kalacağız. Ayrıca birde diyelim ki versiyonda bir güncelleme oldu yine bu kodu değiştirmek zorunda kalacağız çünkü kod değişince hash de değişmiş olacak. Daha dinamik bir yapı kursak daha olacak gibi.</p>
<p>Bunun için yeni bir klasör oluşturalım adı message-third olsun. Daha sonra alttaki kodları <code>derivation.nix</code> adında bir dosyaya kopyalayalım.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># derivaiton.nix</span>
<span class="p">{</span>pkgs<span class="p">,</span> stdenv<span class="p">,</span> gcc<span class="p">,</span> selectedVersion<span class="p">,</span> src<span class="p">,</span> <span class="o">...</span><span class="p">}:</span>

    <span class="k">let</span>

    <span class="c1"># Simple Message App&#39;in kaynak dizini</span>
      <span class="ss">srcDrv</span> <span class="o">=</span> src<span class="p">;</span>


    <span class="k">in</span>
        stdenv<span class="o">.</span>mkDerivation <span class="p">(</span>finalAttrs<span class="p">:</span> <span class="p">{</span>
              <span class="ss">name</span> <span class="o">=</span> <span class="s2">&quot;simple-message-app&quot;</span><span class="p">;</span>
              <span class="ss">version</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>

              <span class="ss">src</span> <span class="o">=</span> srcDrv<span class="p">;</span>

              <span class="ss">buildInputs</span> <span class="o">=</span> <span class="p">[</span> gcc <span class="p">];</span>
              <span class="ss">buildPhase</span> <span class="o">=</span> <span class="s2">&quot;gcc -o simple-message-app </span><span class="si">${</span>src<span class="si">}</span><span class="s2">/message.c&quot;</span><span class="p">;</span>
              <span class="ss">installPhase</span> <span class="o">=</span> <span class="s2">&quot;mkdir -p $out/bin; install -t $out/bin simple-message-app&quot;</span><span class="p">;</span>

              <span class="ss">meta</span> <span class="o">=</span> <span class="k">with</span> pkgs<span class="o">.</span>lib<span class="p">;</span> <span class="p">{</span>
                    <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Simple Message App with C&quot;</span><span class="p">;</span>
                    <span class="ss">license</span> <span class="o">=</span> licenses<span class="o">.</span>mit<span class="p">;</span>
                    <span class="ss">version</span> <span class="o">=</span>  <span class="s2">&quot;</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
                <span class="p">};</span>
        <span class="p">})</span>
</code></pre></div>
<p>Flake.nix içinde alttaki kodu kullanıyoruz.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># flake.nix</span>

<span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Simple Message App with C&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nixos/nixpkgs/nixos-unstable&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span><span class="p">{</span> self<span class="p">,</span> nixpkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>
    <span class="k">let</span>

      <span class="ss">selectedVersion</span> <span class="o">=</span> <span class="p">{</span><span class="ss">version</span> <span class="o">=</span> <span class="s2">&quot;v1.0&quot;</span><span class="p">;};</span>

      <span class="ss">simpleMessageAppSrc</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/muratcabuk/simple-message-app-with-c/archive/refs/tags/</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">.tar.gz&quot;</span><span class="p">;</span>

      <span class="ss">shaSet</span> <span class="o">=</span> <span class="p">{</span><span class="ss">v10</span><span class="o">=</span><span class="s2">&quot;sha256:1aai9xdkgq2vd0ch10gxhg53qfv4ny2x3jgxlq4r9nrn4g9r8s1z&quot;</span><span class="p">;</span>
                <span class="ss">v20</span><span class="o">=</span><span class="s2">&quot;sha256:11p3c793yjpm4z4j9shlidbii7wd0kf9qflx8jqhhnwwhqf93mam&quot;</span><span class="p">;</span>
                <span class="ss">v30</span><span class="o">=</span><span class="s2">&quot;sha256:1a4a2i32da9shc2d3i1ndarmla97bald7lgs1vjmwyjlry0mk4m7&quot;</span><span class="p">;};</span>

      <span class="ss">shaVer</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>concatStringsSep <span class="s2">&quot;&quot;</span> <span class="p">(</span>nixpkgs<span class="o">.</span>lib<span class="o">.</span>strings<span class="o">.</span>splitString <span class="s2">&quot;.&quot;</span> <span class="s2">&quot;</span><span class="si">${</span>selectedVersion<span class="o">.</span>version<span class="si">}</span><span class="s2">&quot;</span><span class="p">);</span>

      <span class="ss">versionSha</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>getAttr shaVer shaSet<span class="p">;</span>

      <span class="c1"># Simple Message App&#39;in kaynak dizini</span>
      <span class="ss">src</span> <span class="o">=</span> <span class="nb">builtins</span><span class="o">.</span>fetchTarball <span class="p">{</span>
        <span class="ss">url</span> <span class="o">=</span> simpleMessageAppSrc<span class="p">;</span>
        <span class="ss">sha256</span> <span class="o">=</span> versionSha<span class="p">;</span>
      <span class="p">};</span>

      <span class="nb">derivation</span> <span class="o">=</span> <span class="nb">import</span> <span class="l">./derivation.nix</span><span class="p">;</span>

    <span class="k">in</span>
    <span class="p">{</span>
      packages<span class="o">.</span>x86_64-linux<span class="o">.</span><span class="ss">default</span> <span class="o">=</span> <span class="k">with</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> config<span class="o">.</span><span class="ss">allowUnfree</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span> <span class="p">};</span>

      <span class="nb">derivation</span> <span class="p">{</span><span class="ss">pkgs</span> <span class="o">=</span> <span class="nb">import</span> nixpkgs <span class="p">{</span> <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span> config<span class="o">.</span><span class="ss">allowUnfree</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span> <span class="p">};</span>
                  <span class="ss">stdenv</span> <span class="o">=</span> stdenv<span class="p">;</span> <span class="ss">gcc</span> <span class="o">=</span> gcc<span class="p">;</span>
                  <span class="ss">selectedVersion</span> <span class="o">=</span> selectedVersion<span class="p">;</span>
                  <span class="ss">src</span> <span class="o">=</span> src<span class="p">;};</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Artık derivation dosyamız kendi işine daha fazla odaklanmış oldu.</p>
<p>Build almayı ve çalıştırmayı biliyoruz artık tekrar yazmıyorum.</p>
<h2 id="flakei-githubda-yaynlamak">Flake'i Github'da Yayınlamak</h2>
<p>Github'da bir repo açıp içine message-third içindeki flake ve derivation dosyalarını upload ediyoruz. Daha sonra bu repo'yu flake olarak kullanmak için alttaki komutu çalıştırıyoruz. Ben kendi Github sayfamda https://github.com/muratcabuk/nix-examples reposunda yayınladım. Ancak siz bu makaleyi okurken main branch'deki kodlar tabi değişmiş olacak. <code>message-third</code> örneğimizdeki kodu görebilmeniz için message-third adında bir branch oluşturdum. Bu örnekte de o branch'i çağırarak kodumuz test edelim.</p>
<p>Komutta github adresine eklediğimiz message-third kısmıyla branch çağırmış oluyoruz.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>run<span class="w"> </span>github:muratcabuk/nix-examples/message-third<span class="w"> </span>--no-write-lock-file
</code></pre></div>
<p>Komutu çalıştırdığınızda flake.nix dosyası altında <code>selectedVersion = {version = "v1.0";};</code> hangi versiyon yazılıysa onun build alınıp çalıştırıldığını görebiliriz.</p>
<p>Buraya kadar halen NixOS kullanmadık. Hala aslında Nix dilinin kıyılarında dolaşmaya devam ediyoruz. Biraz Biraz paket yönetimine girdik ama halen biraz daha yolumuz var. <code>nix shell</code> komutunu gördük ancak orada da aslında imperative bir kullanım yaptık. Yani herhangi bir proje klasörüne girdiğimizde her defasında onlarca bağımlılığı elimizle manuel kurmamız tabii ki anlamsız olacaktır. Yada kendimize bir profile kurmak istediğimizde tek tek uygulamaları kurmak da mantıksız olacaktır. Zaten bunu bütün paket yöneticileri bu şekilde yapıyor. Nix felsefesine de zaten bu kullanım aykırı bir durum. İşte bu nedenle flake'leri ve Nix'in modüler yapısını anlamak çok önemli.Bu sayede manuel yaptığımız her şeyi bir nix dosyasına declarative bir şekilde yazabileceğiz. Ayrıca NixOS'un modüler yapısını da anlamış olacağız.</p>
<p>Bir flake'in ne tür çıktılar üretebildiğini tekrar hatırlayalım.</p>
<ul>
<li>Nix packages</li>
<li>Nix development environments</li>
<li>NixOS configurations</li>
<li>Nix templates</li>
</ul>
<p>Dolayısıyla bir profile oluştururken veya NixOS için bir konfigürasyon ve paket yönetimi oluşturmak istediğimizde karmaşayı yönetmek için modüler bir yapıya ihtiyacımız olacak. Dolayısıyla sadece bir paketi bir GitHub reposunda yayınlamaktan daha fazlasını yapabiliyor olamamız gerekiyor.</p>
<p>Kendimize bi NixOS ortamı veya bir profile oluşturmak istediğimizde aslında bir çok paketin bir arada çalıştığını göreceğiz. Bu paketlerin birbirleriyle uyumlu çalışması için bir çok parametreyi bir arada yönetmemiz gerekecek. Bu nedenle bir çok paketi bir arada yönetebileceğimiz bir yapıya ihtiyacımız olacak. Şimdi elimizdeki repoyu yazı devam ederken devamlı geliştirip değiştireceğiz.</p>
<p>Elimizdeki message uygulaması için repomuzda bir message-app adında bir klasör oluşturup flake.nix ve derivation.nix dosyalarını içine taşıyoruz. Kod ileride değişeceği için message-app adında bir branch oluşturacağım. İleri de kodu incelemek istediğinizde bu branch'den bakabilirsiniz.</p>
<p>Şimdi artık bi branch'imiz bir de klasörümüz var. Branch adının repo adından sonra slaş ile ayırarak yazıldığını biliyoruz. Klasör çağırmak içnde <code>?dir=message-app</code> ekliyoruz.</p>
<div class="highlight"><pre><span></span><code>nix<span class="w"> </span>run<span class="w"> </span><span class="s2">&quot;github:muratcabuk/nix-examples/message-app?dir=message-app&quot;</span><span class="w"> </span>--no-write-lock-file
</code></pre></div>
<ul>
<li>
<p>Belirli bir commit ID'si ile çağırmak için
  <code>nix run github:repo_hesabi/repo_adi/commit_id</code></p>
</li>
<li>
<p>Tag ile çağırmak için
  <code>nix run github:repo_hesabi/repo_adi/tag</code></p>
</li>
<li>
<p>Branch'deki en son commit ile çağırmak için
  <code>nix run github:repo_hesabi/repo_adi/branch_adi</code></p>
</li>
</ul>
<p>Ancak tabiiki bu haliyle kurduğumuz repo bütün paketleri bir birinden bağımsız olarak sunuyor. Bu yukarı bahsettiğimiz amaçlara ulaşmamız için yeteli görünmüyor.</p>
<p>Bunu için öncelikle aynı anda birden fazla paketi nasıl yayınlanabilceğini öğrenmemiz gerekiyor. Bunu da bir sonraki yazımıza bırakalım.</p>
<p>Bu arada eğer resmi repo'ya nasıl paket ekleyebileceğinizi merak ediyorsanız <a href="https://github.com/NixOS/nixpkgs/blob/master/pkgs/README.md">şu sayfadan</a> bakabilirsiniz.</p>
<h1 id="kaynaklar">Kaynaklar</h1>
<ul>
<li><a href="https://zero-to-nix.com/concepts/flakes">https://zero-to-nix.com/concepts/flakes</a></li>
<li><a href="https://serokell.io/blog/practical-nix-flakes">https://serokell.io/blog/practical-nix-flakes</a></li>
<li><a href="https://nixos.wiki/index.php?title=Flakes">https://nixos.wiki/index.php?title=Flakes</a></li>
<li><a href="https://www.tweag.io/blog/2020-07-31-nixos-flakes/">https://www.tweag.io/blog/2020-07-31-nixos-flakes/</a></li>
<li><a href="https://nixos.wiki/wiki/Flakes#Introduction">https://nixos.wiki/wiki/Flakes#Introduction</a></li>
<li><a href="https://determinate.systems/posts/nix-run">https://determinate.systems/posts/nix-run</a></li>
<li><a href="https://nixos.wiki/wiki/Flakes">https://nixos.wiki/wiki/Flakes</a></li>
<li><a href="https://ertt.ca/nix/shell-scripts/">https://ertt.ca/nix/shell-scripts/</a></li>
<li><a href="https://fasterthanli.me/series/building-a-rust-service-with-nix/part-10">https://fasterthanli.me/series/building-a-rust-service-with-nix/part-10</a></li>
<li><a href="https://nix.dev/tutorials/file-sets.html">https://nix.dev/tutorials/file-sets.html</a></li>
<li><a href="https://nixos.wiki/wiki/Nix_Cookbook#Wrapping_packages">https://nixos.wiki/wiki/Nix_Cookbook#Wrapping_packages</a></li>
<li><a href="https://nixos.org/manual/nixpkgs/stable/#part-stdenv">https://nixos.org/manual/nixpkgs/stable/#part-stdenv</a></li>
<li><a href="https://ryantm.github.io/nixpkgs/builders/trivial-builders/">https://ryantm.github.io/nixpkgs/builders/trivial-builders/</a></li>
<li><a href="https://serokell.io/blog/practical-nix-flakes#basic-flake-structure">https://serokell.io/blog/practical-nix-flakes#basic-flake-structure</a></li>
<li><a href="https://lantian.pub/en/article/modify-computer/nixos-packaging.lantian/">https://lantian.pub/en/article/modify-computer/nixos-packaging.lantian/</a></li>
<li><a href="https://github.com/samdroid-apps/nix-articles">https://github.com/samdroid-apps/nix-articles</a></li>
<li><a href="https://github.com/djhshih/biopkgs/tree/master">https://github.com/djhshih/biopkgs/tree/master</a></li>
<li><a href="https://nixos.wiki/wiki/Nixpkgs/Create_and_debug_packages">https://nixos.wiki/wiki/Nixpkgs/Create_and_debug_packages</a></li>
<li><a href="https://nixos.org/guides/nix-pills/generic-builders">https://nixos.org/guides/nix-pills/generic-builders</a></li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.sections", "navigation.prune", "content.action.edit", "content.action.view", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Kopyaland\u0131", "clipboard.copy": "Kopyala", "search.result.more.one": "Bu sayfada 1 tane daha", "search.result.more.other": "Bu sayfada # tane daha", "search.result.none": "E\u015fle\u015fen dok\u00fcman bulunamad\u0131", "search.result.one": "1 dok\u00fcman bulundu", "search.result.other": "# dok\u00fcman bulundu", "search.result.placeholder": "Aramaya ba\u015flamak i\u00e7in yaz\u0131n", "search.result.term.missing": "Eksik", "select.version": "Versiyon se\u00e7"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>