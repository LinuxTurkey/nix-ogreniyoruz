
<!doctype html>
<html lang="tr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nixogreniyoruz.kavakci.dev/nix_ile_nix_konfigurasyonu.html">
      
      
        <link rel="prev" href="nix_package/developer_ve_profile_ortamlari_olusturmak.html">
      
      
        <link rel="next" href="module_ve_option_kullanimi.html">
      
      
      <link rel="icon" href="assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Nix ile NixOS Konfigürasyonu - NixOS Öğreniyoruz - Murat Çabuk</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%208a4%204%200%200%200-4%204%204%204%200%200%200%204%204%204%204%200%200%200%204-4%204%204%200%200%200-4-4%22/%3E%3C/svg%3E');}</style>


    
    
      
        <script src="https://unpkg.com/iframe-worker/shim"></script>
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Nix ile NixOS Konfigürasyonu - NixOS Öğreniyoruz - Murat Çabuk" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://nixogreniyoruz.kavakci.dev/assets/images/social/nix_ile_nix_konfigurasyonu.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://nixogreniyoruz.kavakci.dev/nix_ile_nix_konfigurasyonu.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Nix ile NixOS Konfigürasyonu - NixOS Öğreniyoruz - Murat Çabuk" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://nixogreniyoruz.kavakci.dev/assets/images/social/nix_ile_nix_konfigurasyonu.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="#7EBAE4" data-md-color-accent="#7EBAE4">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nix-ile-nixos-konfigurasyonu" class="md-skip">
          Ana içeriğe geç
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Başlık">
    <a href="index.html" title="NixOS Öğreniyoruz - Murat Çabuk" class="md-header__button md-logo" aria-label="NixOS Öğreniyoruz - Murat Çabuk" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m7.352 1.592-1.364.002L5.32 2.75l1.557 2.713-3.137-.008-1.32 2.34h11.69l-1.353-2.332-3.192-.006-2.214-3.865zm6.175 0-2.687.025 5.846 10.127 1.341-2.34-1.59-2.765 2.24-3.85-.683-1.182h-1.336l-1.57 2.705-1.56-2.72zm6.887 4.195-5.846 10.125 2.696-.008 1.601-2.76 4.453.016.682-1.183-.666-1.157-3.13-.008L21.778 8.1l-1.365-2.313zM9.432 8.086l-2.696.008-1.601 2.76-4.453-.016L0 12.02l.666 1.157 3.13.008-1.575 2.71 1.365 2.315zM7.33 12.25l-.006.01-.002-.004-1.342 2.34 1.59 2.765-2.24 3.85.684 1.182H7.35l.004-.006h.001l1.567-2.698 1.558 2.72 2.688-.026-.004-.006h.01zm2.55 3.93 1.354 2.332 3.192.006 2.215 3.865 1.363-.002.668-1.156-1.557-2.713 3.137.008 1.32-2.34z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NixOS Öğreniyoruz - Murat Çabuk
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nix ile NixOS Konfigürasyonu
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="#7EBAE4" data-md-color-accent="#7EBAE4"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="#7EBAE4" data-md-color-accent="#7EBAE4"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Ara" placeholder="Ara" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Ara">
        
        <button type="reset" class="md-search__icon md-icon" title="Temizle" aria-label="Temizle" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Arama başlatılıyor
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz" title="Depoya git" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    LinuxTurkey/nix-ogreniyoruz
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigasyon" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="NixOS Öğreniyoruz - Murat Çabuk" class="md-nav__button md-logo" aria-label="NixOS Öğreniyoruz - Murat Çabuk" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m7.352 1.592-1.364.002L5.32 2.75l1.557 2.713-3.137-.008-1.32 2.34h11.69l-1.353-2.332-3.192-.006-2.214-3.865zm6.175 0-2.687.025 5.846 10.127 1.341-2.34-1.59-2.765 2.24-3.85-.683-1.182h-1.336l-1.57 2.705-1.56-2.72zm6.887 4.195-5.846 10.125 2.696-.008 1.601-2.76 4.453.016.682-1.183-.666-1.157-3.13-.008L21.778 8.1l-1.365-2.313zM9.432 8.086l-2.696.008-1.601 2.76-4.453-.016L0 12.02l.666 1.157 3.13.008-1.575 2.71 1.365 2.315zM7.33 12.25l-.006.01-.002-.004-1.342 2.34 1.59 2.765-2.24 3.85.684 1.182H7.35l.004-.006h.001l1.567-2.698 1.558 2.72 2.688-.026-.004-.006h.01zm2.55 3.93 1.354 2.332 3.192.006 2.215 3.865 1.363-.002.668-1.156-1.557-2.713 3.137.008 1.32-2.34z"/></svg>

    </a>
    NixOS Öğreniyoruz - Murat Çabuk
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz" title="Depoya git" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    LinuxTurkey/nix-ogreniyoruz
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NixOS
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Nix Dili
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Nix Dili
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_lang/01_nix_dili_ve_ozellikleri.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Dili ve Özellikleri
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_lang/02_nix_dili_alistirmalari.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Dili ile İlgili Alıştırmalar
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_lang/03_nix_dili_gomulu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Dilinde Gömülü Fonksiyonlar
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Nix Paket Yöneticisi
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Nix Paket Yöneticisi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_package/nix_paket_yoneticisi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Paket Yöneticisi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_package/nix_shell_ve_profile.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Shell ve Profile
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_package/nix_flake_nedir.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nix Flake Nedir?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_package/birden_cok_paketi_ayni_repo_uzerinden_yayinlamak.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Birden Çok Paketi Aynı Repo Üzeriden Yayınlamak
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_package/override_ve_overlay.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Override ve Overlay
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nix_package/developer_ve_profile_ortamlari_olusturmak.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer ve Profile Ortamları Oluşturmak
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Sonrası
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sonrası
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Nix ile NixOS Konfigürasyonu
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="nix_ile_nix_konfigurasyonu.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Nix ile NixOS Konfigürasyonu
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="İçindekiler">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      İçindekiler
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-kavram" class="md-nav__link">
    <span class="md-ellipsis">
      Module Kavramı
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#option-ve-config-kavramlar" class="md-nav__link">
    <span class="md-ellipsis">
      Option ve Config Kavramları
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurationnix-dosyas-hakknda" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration.nix Dosyası Hakkında
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-manager-hakknda" class="md-nav__link">
    <span class="md-ellipsis">
      Home-Manager Hakkında
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modul-ve-optionlar-daha-detayl-ogrenmek-icin-kaynaklar" class="md-nav__link">
    <span class="md-ellipsis">
      Modül ve Option'ları Daha Detaylı Öğrenmek İçin Kaynaklar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#turkce-youtube-kaynaklar" class="md-nav__link">
    <span class="md-ellipsis">
      Türkçe Youtube Kaynakları
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kaynaklar" class="md-nav__link">
    <span class="md-ellipsis">
      Kaynaklar
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="module_ve_option_kullanimi.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Module ve Option Kullanımı
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nixos_kurulumu_ve_konfigurasyonu.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NixOS Kurulumu ve Konfigürasyonu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="nixos_cloud_ve_uzak_ortam.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NixOS'u Cloud ve Uzak Ortamlara Deploy Etmek
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="İçindekiler">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      İçindekiler
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#module-kavram" class="md-nav__link">
    <span class="md-ellipsis">
      Module Kavramı
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#option-ve-config-kavramlar" class="md-nav__link">
    <span class="md-ellipsis">
      Option ve Config Kavramları
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configurationnix-dosyas-hakknda" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration.nix Dosyası Hakkında
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#home-manager-hakknda" class="md-nav__link">
    <span class="md-ellipsis">
      Home-Manager Hakkında
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modul-ve-optionlar-daha-detayl-ogrenmek-icin-kaynaklar" class="md-nav__link">
    <span class="md-ellipsis">
      Modül ve Option'ları Daha Detaylı Öğrenmek İçin Kaynaklar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#turkce-youtube-kaynaklar" class="md-nav__link">
    <span class="md-ellipsis">
      Türkçe Youtube Kaynakları
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kaynaklar" class="md-nav__link">
    <span class="md-ellipsis">
      Kaynaklar
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz/edit/main/src/nix_ile_nix_konfigurasyonu.md" title="Düzenle" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/LinuxTurkey/nix-ogreniyoruz/raw/main/src/nix_ile_nix_konfigurasyonu.md" title="Sayfanın kaynağını görüntüle" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="nix-ile-nixos-konfigurasyonu">Nix ile NixOS Konfigürasyonu</h1>
<p>Bu yazıya doğrudan NixOS için geldiyseniz yani geçmiş yazıları okumadan doğrudan NixOS hakkında bir şeyler okumak için geldiyseniz ve NixOS hakkında da hiç bir bilginiz yoksa öncelikle serinin ilk yazısını okumanızı tavsiye ederim.</p>
<p>Girizgahı bir önceki yazıdan kopyalayarak konuya giriş yapalım.</p>
<p>Konumuz NixOS, NixOS'a geçiş yapacağız ancak ilk etapta nasıl kurulur konusuna girmeyeceğiz. Çünkü ilk kurulum için aslında normal herhangi bir Linux dağıtımından farklı kurulmuyor. Ancak elimizde bir Nix konfigürasyonu varsa durum biraz değişiyor. Bu durumda sadece flake.nix dosyasını da içeren root dizini kurulum esnasında göstermemiz yeterli olacaktır.</p>
<p>Yazılarımı hazırlarken veya bir şeyler test ederken Hashicorp Vagrant ürününü çok sık kullanıyorum. Kurulumu oldukça basit ve kullanışlı. Vagrant ile 2-3 satırlık bir komutla sanal makine ayağa kaldırabilirsiniz.</p>
<p>Windows, Mac ve Linux için kurulum yapılabiliyor. <a href="https://developer.hashicorp.com/vagrant/install?product_intent=vagrant">Şu linkten</a> kurulumu yapabilirsiniz.</p>
<p>Alttaki komutları terminalde veya powershell'de çalıştırarak bir NixOS işletim sistemi ayağa kaldırabilirsiniz.</p>
<div class="highlight"><pre><span></span><code>vagrant<span class="w"> </span>init<span class="w"> </span>hennersz/nixos-23.05-flakes
vagrant<span class="w"> </span>up
</code></pre></div>
<p>Kurulum bittikten sonra ayrı terminal açıkken <code>vagrant ssh</code> komutu ile sanal makineye bağlanabilirsiniz. İleride de test etmek bir şey denemek için kullanabilirsiniz.</p>
<p>Ancak Vagrant'dan indireceğimiz image üzerinde bazı şeyler hazır geldiği için ben de sıfır ISO indirip kuracağım. Şu sayfada "NixOS: the Linux distribution" başlığında ISO dosyalarını indirebilirsiniz. Download ederken ve kurulumda kolaylık olması için GUI içeren bir versiyonu KDE ve GNOME tercih edeceğiz ancak kurulum sırasında GUI seçmede yalın bir kurulum yapacağız.</p>
<p><img alt="download.png" src="assets/files/download.png" /></p>
<p>ISO'yu indirdikten sonra herhangi bir sanallaştırma sistemiyle kurulum yapabilirsiniz. Bir kullanıcı da VirtualBox olduğu için ben de onu tercih edeceğim. Zaman, ülke ve klavye ayarlarını Türkiye olarak seçmeyi unutmayın. Sanallaştırma sisteminizde verdiğiniz diskin de tamamını otomatik bölümlendirebilirsiniz.</p>
<p>Ben KDE ile devam ediyorum. Kurulum sırasındaki ayarları gösteren ekran görüntülerini altta veriyorum.</p>
<p><img alt="i1.png" src="assets/files/i1.png" /></p>
<p><img alt="i2.png" src="assets/files/i2.png" /></p>
<p><img alt="i3.png" src="assets/files/i3.png" /></p>
<p><img alt="i4.png" src="assets/files/i4.png" /></p>
<p><img alt="i5.png" src="assets/files/i5.png" /></p>
<p>Kurulum bittiğinde sanal makineyi kapatıp ISO dosyasını çıkartıp tekrar başlatıyoruz. Sistem açıldığında login oluyoruz. İlk olarak büyük ihtimal sizin de yaşayacağınız tahmin ettiğim ekran boyutu problemi ile karşılaşacağız. Bunu çözmeye uğraşmaya şuan hiç grek yok. Onun yerine SSH'ı aktif edip ssh ile bağlanacağız. Bunun için ileride bir çok kez açıp detaylı olarak çalışacağımız <code>/etc/nixos/configuration.nix</code> dosyasını nano ile açıyoruz. Nano dememin sebebi ise henüz sistemde vim'in kurulu olmaması. Alttaki satırları bulup açıklama satırını kapatıyoruz. Yani openssh'ı aktif edip firewall'ı kapatıyoruz.</p>
<div class="highlight"><pre><span></span><code>  <span class="c1"># Enable the OpenSSH daemon.</span>
   services<span class="o">.</span>openssh<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>

  <span class="c1"># Open ports in the firewall.</span>
  <span class="c1"># networking.firewall.allowedTCPPorts = [ ... ];</span>
  <span class="c1"># networking.firewall.allowedUDPPorts = [ ... ];</span>
  <span class="c1"># Or disable the firewall altogether.</span>
   networking<span class="o">.</span>firewall<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">false</span><span class="p">;</span>
</code></pre></div>
<p>Daha sonra terminal'den <code>sudo nixos-rebuild switch</code> komutu ile sistemi update ediyoruz. Aslında yaptığımız değişikliği sisteme uyguluyoruz. Artık ssh ile bağlanabiliriz. Bunun için host makinenizde terminal açıp <code>ssh kullanici_adiniz@192.168.1.1</code> komutuyla bağlanabilirsiniz. sanal makinenizin ip adresini ve kullanıcı adınız değiştirmeyi unutmazsınız ama ben yine de uyarayım :).</p>
<p>Daha sonra flake'i enable etmeniz gerekiyor. Bunun için login olduktan sonra <code>/etc/nixos/configuration.nix</code> dosyasına <code>nix.settings.experimental-features = [ "nix-command" "flakes" ];</code> ekliyoruz. Dosyanın en üstüne hardware-configuration.nix yüklendikten sonra ekleyebiliriz.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Edit this configuration file to define what should be installed on</span>
<span class="c1"># your system.  Help is available in the configuration.nix(5) man page</span>
<span class="c1"># and in the NixOS manual (accessible by running ‘nixos-help’).</span>

<span class="p">{</span> config<span class="p">,</span> pkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>

<span class="p">{</span>
  <span class="ss">imports</span> <span class="o">=</span>
    <span class="p">[</span> <span class="c1"># Include the results of the hardware scan.</span>
      <span class="l">./hardware-configuration.nix</span>
    <span class="p">];</span>

 nix<span class="o">.</span>settings<span class="o">.</span><span class="ss">experimental-features</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;nix-command&quot;</span> <span class="s2">&quot;flakes&quot;</span> <span class="p">];</span>
</code></pre></div>
<p>Daha sonra <code>/etc/nixos/flake.nix</code> dosyasını oluşturup içine alttaki satırları kopyalıyoruz.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Murat Cabuk NixOS Configuration&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:NixOS/nixpkgs/nixos-23.11&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}@</span>inputs<span class="p">:</span> <span class="p">{</span>

    nixosConfigurations<span class="o">.</span><span class="ss">nixos</span> <span class="o">=</span> nixpkgs<span class="o">.</span>lib<span class="o">.</span>nixosSystem <span class="p">{</span>
      <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span>
      <span class="ss">modules</span> <span class="o">=</span> <span class="p">[</span>
        <span class="l">./configuration.nix</span>
      <span class="p">];</span>
    <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Son olarak alttaki komutla komutu ile sistemi update ediyoruz. Nokta ile flake.nix dosyamızın aynı dizinde olduğunu, #nixos ile de flake.nix dosyasında <code>nixosConfigurations.nixos = ...</code> satırında yazan konfigürasyon adını yani burada nixos kelimesini girmiş oluyoruz. Eğer değiştirmediyseniz nixos yazıyor olması lazım.</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>nixos-rebuild<span class="w"> </span>switch<span class="w"> </span>--flake<span class="w"> </span>.#nixos
</code></pre></div>
<p>Evet artık Flake enable edilmiş bir NixOS sistemine sahibiz. Şimdi biraz neler yaptık tam olarak ne dönüyor onun üzerine konuşalım.</p>
<p>Daha önce de bahsetmiştik, bir flake output olarak alttakileri üretebilir.</p>
<ul>
<li>Nix Paketleri</li>
<li>Nix Geliştirme Ortamları</li>
<li>NixOS Modülleri (Nix Configuration)</li>
<li>Nix Template'leri (hazır flake dosyaları)</li>
</ul>
<p>İlk ikisini zaten gördük. Şimdi amacımız NixOS konfigürasyon ve modüllerini üretmek ve kullanmak. Sonuncusuna zaten hiç girmeyeceğiz, en azından bu yazı Nix Öğreniyoruz serisinde girmeyeceğiz.</p>
<p>Nix paketlerini oluştururken flake içinde hatırlarsanız mkDerivation fonksiyonu kullandık. Geliştirme ortamı oluşturmak için mkShell fonksiyonu kullanmıştık. Konfigürasyon oluşturmak için de <code>nixpkgs.lib.nixosSystem</code> fonksiyonunu kullanıyoruz, yukarıda da kullandığımız flake kodlarında da görebilirsiniz.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Murat Cabuk NixOS Configuration&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:NixOS/nixpkgs/nixos-23.11&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}@</span>inputs<span class="p">:</span> <span class="p">{</span>

    nixosConfigurations<span class="o">.</span><span class="ss">nixos</span> <span class="o">=</span> nixpkgs<span class="o">.</span>lib<span class="o">.</span>nixosSystem <span class="p">{</span>
      <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span>
      <span class="ss">modules</span> <span class="o">=</span> <span class="p">[</span>
        <span class="l">./configuration.nix</span>
      <span class="p">];</span>
    <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Burada en basit haliyle birden fazla konfigürasyonu yayınlayabileceğimizi de anlayabiliyoruz. Yani <code>nixosConfigurations.nixos</code> satırındaki nixos kelimesini değiştirip başka bir konfigürasyon oluşturabiliriz. İkinci anlayabileceğimiz konu ise modules kavramı. Configuration.nix dosyamızın bir module olduğunu ve bir liste içinde kullanıldığından dolayı birden fazla modülü bir arada kullanabileceğimizi anlayabiliyoruz.</p>
<h2 id="module-kavram">Module Kavramı</h2>
<p>Şimdi Module kavramına biraz daha detaylı bakalım. Configuration dosyasını incelemeye başladığımızda bazı kavramları teorik olsa da öğrenmemiz gerekiyor. Öncelikle buradaki module kavramının Nix dilindeki module kavramıyla bir ilgisi yok.Nix dilindeki module kavramı generic bir tanım. Herhangi bir nix dosyasını import etmemiz module olarak adlandırılıyor. Buradaki module kavramı NixOS konfigürasyonu için kullanılan bir kavram ve bir standardı var. Alttaki gibi tanımı var ancak ayrıca fonksiyon olarak da tanımlamak mümkün.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">imports</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># Diğer modüller</span>
  <span class="p">];</span>

  <span class="ss">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Option tanımları.</span>
    <span class="c1"># Kullanıcıların bu modülü nasıl kullanabileceğini tanımlar.</span>

  <span class="p">};</span>

  <span class="ss">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Bu modüün ve import edilen diğer modüllerin option&#39;larının ve diğer konfigürasyonalrın ayarlarndığı blok</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Çoğunlukla options ve config bloklarına ihtiyaç olmaz bu durumda alttaki gibi bir kullanımı var.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">imports</span> <span class="o">=</span> <span class="p">[</span>
      <span class="l">./module.nix</span>
  <span class="p">];</span>

  <span class="c1"># örnek bir option tanımı. Bir servis içindeki module enable edilmiş.</span>
  services<span class="o">.</span>othermodule<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
  <span class="c1"># Bu kullanımdan artık config bloğuna ihtiyaç yok.</span>
<span class="p">}</span>
</code></pre></div>
<p>Modülleri fonksiyon olarak da tanımlamak mümkün (ki) biraz büyük çaplı konfigürasyon yaptığımızda buna çok ihtiyacımız olacak. Burada ihtiyaca göre config ve pkgs dışında parametreler de tanımlayabiliriz. Ayrıca isteğe göre config ve options tanımları da yapılabilir. Ancak burada da bir açıklama yapayım parametre olarak gelen config ile içeride tanımlanan config birbirinden farklı şeyler. Parametre olarak fonksiyona gelen config modül sisteminin lazy değerlendirmesinin sonucunu tutar; bu değerlendirme, evalModules'e geçirilen tüm modülleri ve bunların import'larını içinde tutar. Bu üzerinde çalıştığımız module için de geçerli. Üzerinde çalıştığımız modüldeki config ise modülün seçenek değerlerini modül sistemi için değerlendirmeye sunar.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span> config<span class="p">,</span> pkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>
<span class="p">{</span>
  <span class="ss">imports</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="c1"># ...</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="option-ve-config-kavramlar">Option ve Config Kavramları</h2>
<p>Peki option ve config tam olarak nedir? içine koyarız ona bakalım. OOP dünyasından geliyorsanız bunu property kavramına benzetebiliriz. Amacımız yazdığımız modülün kullanıcı tarafından nasıl kullanılacağını belirlemek. Örneğin bir servisi enable etmek istiyoruz. Bu servisin bize sunduğu option yardımıyla servisi aktif edebiliyoruz.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">options</span> <span class="o">=</span> <span class="p">{</span>
    services<span class="o">.</span>my-service<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="p">{</span>
      <span class="ss">type</span> <span class="o">=</span> types<span class="o">.</span>bool<span class="p">;</span>
      <span class="ss">default</span> <span class="o">=</span> <span class="no">false</span><span class="p">;</span>
      <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Enable my service&quot;</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Burada önceli yazıları takip veya konuyu bilen arkadaşların aklına şu soru gelebilir. Neden parametre olarak geçmiyoruz da option diye bir tanımlama yapıyoruz?</p>
<ul>
<li>Öncelikle karmaşık modüllerde parametreleri yönetmek zorlaşacaktır.</li>
<li>Malum modüller temelde bir işletim sistemini yönetmek için kullanılıyor. Bu değişkenlerin tipleri ve değerleri bu durumda önem arzediyor ve belli bazı kontrollerden geçmesi gerekiyor.</li>
<li>Son tahlilde bütün kullanılacak modüller tek bir sistemi ayarlamaya çalışıyor dolayısıyla merkezi bir yapının tutarlılık için kontrol etmesi gerekiyor.</li>
<li>Birde bu option'ların önceliklerinin yönetimi söz konusu olan yerlerde bu standart ve yönetimli yapı işi kolaylaştırıyor.</li>
<li>Diğer bir sebep de Nix fonksiyonel bir programlama dili ve tanımlanan bir değer bir daha değiştirilemez yani immutable. Bunu aşmak için daha önceki yazılarımızdan da okuyabileceğiniz üzere override mekanizması var. Ancak tabi override mekanizması bile aynı değişkenin farklı yerlerde değişimini kontrol edebilecek bir mekanizmaya sahip değil. Mesela nginx servisini bir modülde enable ettiniz bir başka modülde ise disable ettiniz. Son tahlilde bunlardan bir tanesi geçerli olmalı. İşte bunu option'lar yardımıyla yapabiliyoruz.</li>
</ul>
<p>Option tanımlamada belli bir standardın uygulanıyor olması ve merkezi olarak yönetilmesi sayesinde bunlara erişim ve anlama da kolaylaşmaktadır. Herkes kafasına göre fonksiyon yazıp argument isteyerek bu işi yapsaydı ortalığın çok karışacağı kesin. Standardizasyon sayesinde resmi paket yapısındaki bütün optiion'ları arayıp narıl kullanılcağı konusunda bilgi alabiliyoruz. (https://search.nixos.org/options)[https://search.nixos.org/options] adresinden erişebilirsiniz. Mesela alttaki örnekteki locate servisini arattığımızda alttaki gibi bir sonuç göreceğiz.</p>
<p><img alt="option.png" src="assets/files/option.png" /></p>
<p>Option tanımlamak şematik olarak çok kolay sadece mkOption fonksiyonunu çalıştırmamız yeterli. Mesela NixOS manual sayfasından aldığı alttaki örneği inceleyelim.</p>
<ul>
<li>Locale servisini enable/disable etmek için adı enable olan bir option tanımlanmış.</li>
<li>İkinci option ise locate veritabanının belli bir zamanda update edilmesi için tanımlanan interval option'ı.</li>
</ul>
<p>Ve bu iki option kullanılarak da config bloğunda locate servisi ayarlanmış. Dikkat ederseniz modülün config tanımlamasında yine modülülün option'ları kullanılmış. Ancak doğrudan erişmek yerine config.servisler.locate şeklinde erişilmiş. Sebebi ise yukarıda bahsettiğimiz merkezi yapıyı korumak. Yani bir option kullanılacaksa veya değiştirilecekse bunun option ve config merkezi sistemi içinde yapılması gerekiyor. Bu nedenle de option hangi servis için tanımlandıysa o servis <code>cfg = config.services.locate;</code> satırı ile bir değişkene atanıyor ve bu değişken üzerinden kullanılıyor.</p>
<p>Buradaki örnek bir modül tanımı ve bu modül nixpkgs altında tanımlı. Dolayısıyla biz kendi konfigürasyonumuzda interval değerini <code>services.locate.interval = zaman_değeri</code> şeklinde değiştirebiliriz.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span> config<span class="p">,</span> lib<span class="p">,</span> pkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>

<span class="k">with</span> lib<span class="p">;</span>

<span class="k">let</span>
  <span class="ss">cfg</span> <span class="o">=</span> config<span class="o">.</span>services<span class="o">.</span>locate<span class="p">;</span>
<span class="k">in</span> <span class="p">{</span>
  options<span class="o">.</span>services<span class="o">.</span><span class="ss">locate</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">enable</span> <span class="o">=</span> mkOption <span class="p">{</span>
      <span class="ss">type</span> <span class="o">=</span> types<span class="o">.</span>bool<span class="p">;</span>
      <span class="ss">default</span> <span class="o">=</span> <span class="no">false</span><span class="p">;</span>
      <span class="ss">description</span> <span class="o">=</span> <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">        If enabled, NixOS will periodically update the database of</span>
<span class="s s-Multiline">        files used by the locate command.</span>
<span class="s s-Multiline">      &#39;&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="ss">interval</span> <span class="o">=</span> mkOption <span class="p">{</span>
      <span class="ss">type</span> <span class="o">=</span> types<span class="o">.</span>str<span class="p">;</span>
      <span class="ss">default</span> <span class="o">=</span> <span class="s2">&quot;02:15&quot;</span><span class="p">;</span>
      <span class="ss">example</span> <span class="o">=</span> <span class="s2">&quot;hourly&quot;</span><span class="p">;</span>
      <span class="ss">description</span> <span class="o">=</span> <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">        Update the locate database at this interval. Updates by</span>
<span class="s s-Multiline">        default at 2:15 AM every day.</span>

<span class="s s-Multiline">        The format is described in</span>
<span class="s s-Multiline">        systemd.time(7).</span>
<span class="s s-Multiline">      &#39;&#39;</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="c1"># Other options omitted for documentation</span>
  <span class="p">};</span>

  <span class="ss">config</span> <span class="o">=</span> <span class="p">{</span>
    systemd<span class="o">.</span>services<span class="o">.</span><span class="ss">update-locatedb</span> <span class="o">=</span>
      <span class="p">{</span> <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Update Locate Database&quot;</span><span class="p">;</span>
        <span class="ss">path</span>  <span class="o">=</span> <span class="p">[</span> pkgs<span class="o">.</span>su <span class="p">];</span>
        <span class="ss">script</span> <span class="o">=</span>
          <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">            mkdir -m 0755 -p $(dirname </span><span class="si">${</span><span class="nb">toString</span> cfg<span class="o">.</span>output<span class="si">}</span><span class="s s-Multiline">)</span>
<span class="s s-Multiline">            exec updatedb \</span>
<span class="s s-Multiline">              --localuser=</span><span class="si">${</span>cfg<span class="o">.</span>localuser<span class="si">}</span><span class="s s-Multiline"> \</span>
<span class="s s-Multiline">              </span><span class="si">${</span>optionalString <span class="p">(</span><span class="o">!</span>cfg<span class="o">.</span>includeStore<span class="p">)</span> <span class="s2">&quot;--prunepaths=&#39;/nix/store&#39;&quot;</span><span class="si">}</span><span class="s s-Multiline"> \</span>
<span class="s s-Multiline">              --output=</span><span class="si">${</span><span class="nb">toString</span> cfg<span class="o">.</span>output<span class="si">}</span><span class="s s-Multiline"> </span><span class="si">${</span>concatStringsSep <span class="s2">&quot; &quot;</span> cfg<span class="o">.</span>extraFlags<span class="si">}</span>
<span class="s s-Multiline">          &#39;&#39;</span><span class="p">;</span>
      <span class="p">};</span>

    systemd<span class="o">.</span>timers<span class="o">.</span><span class="ss">update-locatedb</span> <span class="o">=</span> mkIf cfg<span class="o">.</span>enable
      <span class="p">{</span> <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Update timer for locate database&quot;</span><span class="p">;</span>
        <span class="ss">partOf</span>      <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;update-locatedb.service&quot;</span> <span class="p">];</span>
        <span class="ss">wantedBy</span>    <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;timers.target&quot;</span> <span class="p">];</span>
        timerConfig<span class="o">.</span><span class="ss">OnCalendar</span> <span class="o">=</span> cfg<span class="o">.</span>interval<span class="p">;</span>
      <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>mkOption fonksiyonunda kullanılan argümanlar</p>
<ul>
<li>
<p><strong>type</strong>: Option'ın tipini belirtir. Kendi tipimizi de yazabiliriz (<a href="https://nixos.org/manual/nixos/stable/#sec-option-types-custom">kaynak</a>). Tanımlı tiplerin listesi için <a href="https://nixos.org/manual/nixos/stable/#sec-option-types">şu sayfayı</a> ziyaret ediniz.</p>
</li>
<li>
<p><strong>default</strong>: Option'ın değeri atanmamışsa kullanılacak değer.</p>
</li>
<li>
<p><strong>defaultText</strong>: Karmaşık veriler için kullanışlı bir özellik. Özellikle expression yazılacaksa veya başka paket veya verilere bağımlıysa kullanışlıdır.</p>
</li>
<li>
<p><strong>example</strong>: NixOS manual dosyaları için kullanılır.</p>
</li>
<li>
<p><strong>description</strong>: Markdown formatında description yazılabilir.</p>
</li>
</ul>
<p>Config bloğu ise seçeneklerin varsayılan değerlerini veya kullanıcı tarafından yapılandırılmış değerlerini içerir. Bu kısımda, seçeneklerin nasıl ayarlanacağı veya değiştirileceği tanımlanır. Bu şekilde, kullanıcılar tarafından yapılandırılan seçenekler config bölümünde belirtilen değerlerle değiştirilir.</p>
<p>Alttaki çalışmanın son halini de <a href="https://github.com/muratcabuk/nixos-sample-dotfiles">Github'daki repo</a> üzerinden inceleyebilirsiniz. Adım adım her değişimi ayrı bir branch olarak ekleyeceğim. Kod değişeceği için geri dönük takip edebilirsiniz kodu. Bu yazıda en son bıraktığımız yeri <a href="https://github.com/muratcabuk/nixos-sample-dot./assets/files/tree/base">base adlı branch'den</a> bakabilirsiniz.</p>
<h2 id="configurationnix-dosyas-hakknda">Configuration.nix Dosyası Hakkında</h2>
<p>En başta configuration.nix dosyamızın da bir module olduğunu söylemiştik.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;Murat Cabuk NixOS Configuration&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:NixOS/nixpkgs/nixos-23.11&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span> <span class="p">{</span> self<span class="p">,</span> nixpkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}@</span>inputs<span class="p">:</span> <span class="p">{</span>

    nixosConfigurations<span class="o">.</span><span class="ss">nixos</span> <span class="o">=</span> nixpkgs<span class="o">.</span>lib<span class="o">.</span>nixosSystem <span class="p">{</span>
      <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span>
      <span class="ss">modules</span> <span class="o">=</span> <span class="p">[</span>
        <span class="l">./configuration.nix</span>
      <span class="p">];</span>
    <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Şimdi artık bu module'e bir göz atabiliriz. BAzı açıklama satırlarını dosya küçülsün diye kaldırdım.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span> config<span class="p">,</span> pkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>

<span class="p">{</span>
  <span class="ss">imports</span> <span class="o">=</span>
    <span class="p">[</span> <span class="c1"># Include the results of the hardware scan.</span>
      <span class="l">./hardware-configuration.nix</span>
    <span class="p">];</span>

 nix<span class="o">.</span>settings<span class="o">.</span><span class="ss">experimental-features</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;nix-command&quot;</span> <span class="s2">&quot;flakes&quot;</span> <span class="p">];</span>


  <span class="c1"># Bootloader.</span>
  boot<span class="o">.</span>loader<span class="o">.</span>grub<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
  boot<span class="o">.</span>loader<span class="o">.</span>grub<span class="o">.</span><span class="ss">device</span> <span class="o">=</span> <span class="s2">&quot;/dev/sda&quot;</span><span class="p">;</span>
  boot<span class="o">.</span>loader<span class="o">.</span>grub<span class="o">.</span><span class="ss">useOSProber</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>

  networking<span class="o">.</span><span class="ss">hostName</span> <span class="o">=</span> <span class="s2">&quot;nixos&quot;</span><span class="p">;</span> <span class="c1"># Define your hostname.</span>
  <span class="c1"># networking.wireless.enable = true;  # Enables wireless support via wpa_supplicant.</span>

  <span class="c1"># Enable networking</span>
  networking<span class="o">.</span>networkmanager<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>

  <span class="c1"># Set your time zone.</span>
  time<span class="o">.</span><span class="ss">timeZone</span> <span class="o">=</span> <span class="s2">&quot;Europe/Istanbul&quot;</span><span class="p">;</span>

  <span class="c1"># Select internationalisation properties.</span>
  i18n<span class="o">.</span><span class="ss">defaultLocale</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>

  i18n<span class="o">.</span><span class="ss">extraLocaleSettings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">LC_ADDRESS</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_IDENTIFICATION</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_MEASUREMENT</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_MONETARY</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_NAME</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_NUMERIC</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_PAPER</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_TELEPHONE</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
    <span class="ss">LC_TIME</span> <span class="o">=</span> <span class="s2">&quot;tr_TR.UTF-8&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1"># Configure keymap in X11</span>
  services<span class="o">.</span><span class="ss">xserver</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">layout</span> <span class="o">=</span> <span class="s2">&quot;tr&quot;</span><span class="p">;</span>
    <span class="ss">xkbVariant</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="c1"># Configure console keymap</span>
  console<span class="o">.</span><span class="ss">keyMap</span> <span class="o">=</span> <span class="s2">&quot;trq&quot;</span><span class="p">;</span>

  <span class="c1"># Define a user account. Don&#39;t forget to set a password with ‘passwd’.</span>
  users<span class="o">.</span>users<span class="o">.</span><span class="ss">muratcabuk</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">isNormalUser</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
    <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;murat cabuk&quot;</span><span class="p">;</span>
    <span class="ss">extraGroups</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;networkmanager&quot;</span> <span class="s2">&quot;wheel&quot;</span> <span class="p">];</span>
    <span class="ss">packages</span> <span class="o">=</span> <span class="k">with</span> pkgs<span class="p">;</span> <span class="p">[];</span>
  <span class="p">};</span>

  <span class="c1"># Allow unfree packages</span>
  nixpkgs<span class="o">.</span>config<span class="o">.</span><span class="ss">allowUnfree</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
  virtualisation<span class="o">.</span>virtualbox<span class="o">.</span>guest<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
  virtualisation<span class="o">.</span>virtualbox<span class="o">.</span>guest<span class="o">.</span><span class="ss">x11</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>



  <span class="c1"># List packages installed in system profile. To search, run:</span>
  <span class="c1"># $ nix search wget</span>
  environment<span class="o">.</span><span class="ss">systemPackages</span> <span class="o">=</span> <span class="k">with</span> pkgs<span class="p">;</span> <span class="p">[</span>
    vim <span class="c1"># Do not forget to add an editor to edit configuration.nix! The Nano editor is also installed by default.</span>
    wget
    curl
    git
  <span class="p">];</span>



  <span class="c1"># Enable the OpenSSH daemon.</span>
   services<span class="o">.</span>openssh<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>


   networking<span class="o">.</span>firewall<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">false</span><span class="p">;</span>

  <span class="c1"># This value determines the NixOS release from which the default</span>
  <span class="c1"># settings for stateful data, like file locations and database versions</span>
  <span class="c1"># on your system were taken. It‘s perfectly fine and recommended to leave</span>
  <span class="c1"># this value at the release version of the first install of this system.</span>
  <span class="c1"># Before changing this value read the documentation for this option</span>
  <span class="c1"># (e.g. man configuration.nix or on https://nixos.org/nixos/options.html).</span>
  system<span class="o">.</span><span class="ss">stateVersion</span> <span class="o">=</span> <span class="s2">&quot;23.11&quot;</span><span class="p">;</span> <span class="c1"># Did you read the comment?</span>
<span class="p">}</span>
</code></pre></div>
<p>Modüle dikkat ederseniz üstte bahsettiğimiz fonksiyon moduyla yazılmış. Herhangi bir option tanımı yok. Fonksiyon argument olarka config ve pkgs almış. Doğal olarak bir çok option ayarlanıyor ve bazı uygulamalar da nixpkgs'den kuruluyor. Mesela alttaki satırlarla vim, wget, curl ve git uygulamalarının nixpkgs'den kurulduğunu görebiliyoruz.</p>
<div class="highlight"><pre><span></span><code>environment<span class="o">.</span><span class="ss">systemPackages</span> <span class="o">=</span> <span class="k">with</span> pkgs<span class="p">;</span> <span class="p">[</span>
    vim <span class="c1"># Do not forget to add an editor to edit configuration.nix! The Nano editor is also installed by default.</span>
    wget
    curl
    git
  <span class="p">];</span>
</code></pre></div>
<p>Ayrıca bu modül başka bir modülü de yüklüyor. Alttaki satırla görebiliyoruz.</p>
<div class="highlight"><pre><span></span><code>  <span class="ss">imports</span> <span class="o">=</span>
    <span class="p">[</span> <span class="c1"># Include the results of the hardware scan.</span>
      <span class="l">./hardware-configuration.nix</span>
    <span class="p">];</span>
</code></pre></div>
<p>Bu iki blok dışında gördüğümüz bütün kodlarda config bloğunu temsil ediyor. Böylece iç içe onlarca modül bir çok option tanımı ve monfigürasyon içeriyor. Son tahlilde bütün bu konfigürasyonlar tek bir set haline getirilerek NixOS'a uygulanıyor.</p>
<p>hardware-configuration.nix dosyası da bir modül. Bunu da inceleyecek olursak yine fonksiyon tanımı olarak yazıldığını görebiliyoruz. Option tanımı hiç yok ve geri kalanı da zaten config tanımlaması olarak görünüyor. Host platform olarak x86_64-linux olarak ayarlanmış Bildiğiniz gibi paketler onlarca farklı sistem de çalışabiliyor. Dolayısıyla eğer kendimiz bir modül yazacaksak ve farklı host'ları da ayağa kaldırmak için kullanacaksak bunu da göz önünde bulundurmalıyız.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Do not modify this file!  It was generated by ‘nixos-generate-config’</span>
<span class="c1"># and may be overwritten by future invocations.  Please make changes</span>
<span class="c1"># to /etc/nixos/configuration.nix instead.</span>
<span class="p">{</span> config<span class="p">,</span> lib<span class="p">,</span> pkgs<span class="p">,</span> modulesPath<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>

<span class="p">{</span>
  <span class="ss">imports</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>

  boot<span class="o">.</span>initrd<span class="o">.</span><span class="ss">availableKernelModules</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;ata_piix&quot;</span> <span class="s2">&quot;ohci_pci&quot;</span> <span class="s2">&quot;ehci_pci&quot;</span> <span class="s2">&quot;ahci&quot;</span> <span class="s2">&quot;sd_mod&quot;</span> <span class="s2">&quot;sr_mod&quot;</span> <span class="p">];</span>
  boot<span class="o">.</span>initrd<span class="o">.</span><span class="ss">kernelModules</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>
  boot<span class="o">.</span><span class="ss">kernelModules</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>
  boot<span class="o">.</span><span class="ss">extraModulePackages</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>

  fileSystems<span class="o">.</span><span class="s2">&quot;/&quot;</span> <span class="o">=</span>
    <span class="p">{</span> <span class="ss">device</span> <span class="o">=</span> <span class="s2">&quot;/dev/disk/by-uuid/5b06bc26-f363-4810-bc0d-a44a9c7cdc12&quot;</span><span class="p">;</span>
      <span class="ss">fsType</span> <span class="o">=</span> <span class="s2">&quot;ext4&quot;</span><span class="p">;</span>
    <span class="p">};</span>

  <span class="ss">swapDevices</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>

  <span class="c1"># Enables DHCP on each ethernet and wireless interface. In case of scripted networking</span>
  <span class="c1"># (the default) this is the recommended approach. When using systemd-networkd it&#39;s</span>
  <span class="c1"># still possible to use this option, but it&#39;s recommended to use it in conjunction</span>
  <span class="c1"># with explicit per-interface declarations with `networking.interfaces.&lt;interface&gt;.useDHCP`.</span>
  networking<span class="o">.</span><span class="ss">useDHCP</span> <span class="o">=</span> lib<span class="o">.</span>mkDefault <span class="no">true</span><span class="p">;</span>
  <span class="c1"># networking.interfaces.enp0s3.useDHCP = lib.mkDefault true;</span>

  nixpkgs<span class="o">.</span><span class="ss">hostPlatform</span> <span class="o">=</span> lib<span class="o">.</span>mkDefault <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span>
  virtualisation<span class="o">.</span>virtualbox<span class="o">.</span>guest<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="home-manager-hakknda">Home-Manager Hakkında</h2>
<p>NixOS sadece sistem level konfigürasyonları desteklerken Home-Manager ise tamamen community tarafında geliştirilen ve kullanıcı level konfigürasyonları yönetmemizi sağlar. Yani home dizinimizi yönetmemizi sağlar. <a href="https://github.com/nix-community/home-manager">Resmi Github sayfasından</a> tüm dokümanlara erişebilirsiniz.</p>
<p>Home_manager bu arada NixOS olmadan da kullanılabilir. NixOS ile kullanılacağı zaman module olarak eklenir. Eğer NixOS dışında kullanacaksanız <a href="https://nix-community.github.io/home-manager/index.xhtml#sec-install-standalone">resmi doküman</a> sayfasındaki Standalone Installation başlığını inceleyebilirsiniz.</p>
<p>Home-Manager da aynı sistem konfigürasyonun da yaptığımız gibi bir module olarak olarak yüklenir. Alttaki flake örneğinde modules listesine home-manager'ın eklendiğini görebiliriz. Dikkat edilirse home.nix adında bir dosya import ediliyor.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># flake.nix</span>

<span class="p">{</span>
  <span class="ss">description</span> <span class="o">=</span> <span class="s2">&quot;NixOS configuration&quot;</span><span class="p">;</span>

  <span class="ss">inputs</span> <span class="o">=</span> <span class="p">{</span>
    nixpkgs<span class="o">.</span><span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nixos/nixpkgs/nixos-23.11&quot;</span><span class="p">;</span>

    <span class="ss">home-manager</span> <span class="o">=</span> <span class="p">{</span>
      <span class="ss">url</span> <span class="o">=</span> <span class="s2">&quot;github:nix-community/home-manager/release-23.11&quot;</span><span class="p">;</span>
      inputs<span class="o">.</span>nixpkgs<span class="o">.</span><span class="ss">follows</span> <span class="o">=</span> <span class="s2">&quot;nixpkgs&quot;</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">};</span>

  <span class="ss">outputs</span> <span class="o">=</span> inputs<span class="p">@{</span> nixpkgs<span class="p">,</span> home-manager<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span> <span class="p">{</span>
    <span class="ss">nixosConfigurations</span> <span class="o">=</span> <span class="p">{</span>
      <span class="c1"># TODO please change the hostname to your own</span>
      <span class="ss">my-nixos</span> <span class="o">=</span> nixpkgs<span class="o">.</span>lib<span class="o">.</span>nixosSystem <span class="p">{</span>
        <span class="ss">system</span> <span class="o">=</span> <span class="s2">&quot;x86_64-linux&quot;</span><span class="p">;</span>
        <span class="ss">modules</span> <span class="o">=</span> <span class="p">[</span>
          <span class="l">./configuration.nix</span>

          home-manager<span class="o">.</span>nixosModules<span class="o">.</span>home-manager <span class="p">{</span>
            home-manager<span class="o">.</span><span class="ss">useGlobalPkgs</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
            home-manager<span class="o">.</span><span class="ss">useUserPackages</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>

            home-manager<span class="o">.</span>users<span class="o">.</span><span class="ss">muratcabuk</span> <span class="o">=</span> <span class="nb">import</span> <span class="l">./home.nix</span><span class="p">;</span>


          <span class="p">}</span>
        <span class="p">];</span>
      <span class="p">};</span>
    <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>
</code></pre></div>
<p>Home.nix dosyasına da bir göz atalım. Tabi alttaki çok küçük bir dosya. Büyük ihtimal kendi modülünüzü yazdığınızda bundan çok daha büyük hatta iç içe bir çok modülden oluşacak bir yapıda yazacaksınız.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># home.nix</span>

<span class="p">{</span> config<span class="p">,</span> pkgs<span class="p">,</span> <span class="o">...</span> <span class="p">}:</span>

<span class="p">{</span>

  home<span class="o">.</span><span class="ss">username</span> <span class="o">=</span> <span class="s2">&quot;muratcabuk&quot;</span><span class="p">;</span>
  home<span class="o">.</span><span class="ss">homeDirectory</span> <span class="o">=</span> <span class="s2">&quot;/home/muratcabuk&quot;</span><span class="p">;</span>


  home<span class="o">.</span><span class="ss">packages</span> <span class="o">=</span> <span class="k">with</span> pkgs<span class="p">;</span> <span class="p">[</span>

    neofetch
    zip
    ripgrep
    jq
    which
    tree
    btop
    iotop
    iftop
    sysstat
    lm_sensors
    ethtool
  <span class="p">];</span>


  programs<span class="o">.</span><span class="ss">git</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
    <span class="ss">userName</span> <span class="o">=</span> <span class="s2">&quot;muratcabuk&quot;</span><span class="p">;</span>
  <span class="p">};</span>


  programs<span class="o">.</span><span class="ss">bash</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
    <span class="ss">enableCompletion</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>

    <span class="ss">bashrcExtra</span> <span class="o">=</span> <span class="s s-Multiline">&#39;&#39;</span>
<span class="s s-Multiline">      export PATH=&quot;$PATH:$HOME/bin:$HOME/.local/bin:$HOME/go/bin&quot;</span>
<span class="s s-Multiline">    &#39;&#39;</span><span class="p">;</span>


    <span class="ss">shellAliases</span> <span class="o">=</span> <span class="p">{</span>
      <span class="ss">k</span> <span class="o">=</span> <span class="s2">&quot;kubectl&quot;</span><span class="p">;</span>
      <span class="ss">ll</span> <span class="o">=</span> <span class="s2">&quot;ls -lhs&quot;</span><span class="p">;</span>

    <span class="p">};</span>
  <span class="p">};</span>


  home<span class="o">.</span><span class="ss">stateVersion</span> <span class="o">=</span> <span class="s2">&quot;23.11&quot;</span><span class="p">;</span>

  programs<span class="o">.</span>home-manager<span class="o">.</span><span class="ss">enable</span> <span class="o">=</span> <span class="no">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Yazıyı uzatmamak için şimdilik burada kesiyoruz. Bir sonraki yazımızda modül ve option tanımlamanın detaylarına gireceğiz. Kendi modüllerimizi yazarak option yazmanın inceliklerine değineceğiz.</p>
<h2 id="modul-ve-optionlar-daha-detayl-ogrenmek-icin-kaynaklar">Modül ve Option'ları Daha Detaylı Öğrenmek İçin Kaynaklar</h2>
<ul>
<li><a href="https://nixos.org/manual/nixos/stable/#sec-writing-modules">NixOS manual</a></li>
<li><a href="https://nixos.wiki/wiki/NixOS_modules">NixOS Wiki</a></li>
<li><a href="https://nix.dev/tutorials/module-system/module-system.html">Nix Language</a></li>
<li><a href="https://nixos-and-flakes.thiscute.world/nixos-with-flakes/modularize-the-configuration">NixOS Non-Official</a></li>
</ul>
<h2 id="turkce-youtube-kaynaklar">Türkçe Youtube Kaynakları</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=ytQ1tC-dFeQ">Youtube 1</a></li>
<li><a href="https://www.youtube.com/watch?v=zBAKL3Kcd9o">Youtube 2</a></li>
<li><a href="https://www.youtube.com/watch?v=VIBPfXmkvr8&amp;t=4308s">Youtube 3</a></li>
</ul>
<h2 id="kaynaklar">Kaynaklar</h2>
<ul>
<li><a href="https://github.com/Misterio77/nix-starter-configs/tree/main">https://github.com/Misterio77/nix-starter-configs/tree/main</a></li>
<li><a href="https://nixos-and-flakes.thiscute.world/nixos-with-flakes/modularize-the-configuration">https://nixos-and-flakes.thiscute.world/nixos-with-flakes/modularize-the-configuration</a></li>
<li><a href="https://www.tweag.io/blog/2020-07-31-nixos-flakes/">https://www.tweag.io/blog/2020-07-31-nixos-flakes/</a></li>
<li><a href="https://jade.fyi/blog/flakes-arent-real/">https://jade.fyi/blog/flakes-arent-real/</a></li>
<li><a href="https://github.com/mikeroyal/NixOS-Guide">https://github.com/mikeroyal/NixOS-Guide</a></li>
<li><a href="https://nixos.wiki/wiki/NixOS_modules">https://nixos.wiki/wiki/NixOS_modules</a></li>
<li><a href="https://nix.dev/tutorials/module-system/module-system.html">https://nix.dev/tutorials/module-system/module-system.html</a></li>
<li><a href="https://nixos.org/manual/nixos/stable/#sec-writing-modules">https://nixos.org/manual/nixos/stable/#sec-writing-modules</a></li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "navigation.instant.progress", "navigation.sections", "navigation.prune", "content.action.edit", "content.action.view", "search.suggest", "search.highlight"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Kopyaland\u0131", "clipboard.copy": "Kopyala", "search.result.more.one": "Bu sayfada 1 tane daha", "search.result.more.other": "Bu sayfada # tane daha", "search.result.none": "E\u015fle\u015fen dok\u00fcman bulunamad\u0131", "search.result.one": "1 dok\u00fcman bulundu", "search.result.other": "# dok\u00fcman bulundu", "search.result.placeholder": "Aramaya ba\u015flamak i\u00e7in yaz\u0131n", "search.result.term.missing": "Eksik", "select.version": "Versiyon se\u00e7"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>